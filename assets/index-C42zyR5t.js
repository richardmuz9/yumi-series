const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-ponyfill-CXDcwSTK.js","assets/vendor-IypXtaUq.js","assets/WritingHelperScreen-BqjqOLFN.js","assets/ModeToggle-BaEY7_BJ.js","assets/ModeToggle-BxXbS3-2.css","assets/AnimeCharaHelperApp-CENhVs9p.js","assets/ArrowBack-CLZz7F0C.js","assets/AnimeCharaHelperApp-BEs2O_xi.css","assets/MangaApp-D7uF3Onr.js","assets/MangaApp-EHiRWhnK.css","assets/ChargePage-y4D_oWtW.js","assets/billingApi-DsX-GX7c.js","assets/ChargePage-ZhTmxzUY.css","assets/MainPage-D5iy2Gzd.js","assets/MainPage-Cv01WrTK.css"])))=>i.map(i=>d[i]);
import{j as ne,h as wt,E as bt,c as vt,r as an,a as cn,b as S,u as St,i as Re,d as ln,B as un,R as dn,e as z,N as hn,C as fn,f as pn}from"./vendor-IypXtaUq.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var Ys=ne.Fragment,c=function(e,n,r){return wt.call(n,"css")?ne.jsx(bt,vt(e,n),r):ne.jsx(e,n,r)},p=function(e,n,r){return wt.call(n,"css")?ne.jsxs(bt,vt(e,n),r):ne.jsxs(e,n,r)},ke={},ze=an;ke.createRoot=ze.createRoot,ke.hydrateRoot=ze.hydrateRoot;const mn="modulepreload",gn=function(t){return"/"+t},We={},U=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=gn(u),u in We)return;We[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":mn,d||(f.as="script"),f.crossOrigin="",f.href=u,a&&f.setAttribute("nonce",a),document.head.appendChild(f),d)return new Promise((w,E)=>{f.addEventListener("load",w),f.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})},yn=cn((t,e)=>({mode:"agent",messages:[],previewCode:"",provider:"qwen",model:"qwen-turbo",availableModels:{openai:["gpt-4","gpt-4-turbo","gpt-4o","gpt-4o-mini","gpt-3.5-turbo"],qwen:["qwen-turbo","qwen-plus","qwen-max","qwen-vl-plus","qwen-vl-max"],claude:["claude-opus-4-20250514","claude-sonnet-4-20250514","claude-3-opus-20240229","claude-3-5-sonnet-20240620","claude-3-sonnet-20240229","claude-3-haiku-20240307"],gemini:["gemini-pro","gemini-1.5-flash","gemini-pro-vision"]},isLoading:!1,currentView:"chat",language:localStorage.getItem("yumiLanguage")||"en",showLayoutCustomizer:!1,installedModes:["web-builder"],setMode:n=>t({mode:n}),setProvider:n=>t({provider:n}),setModel:n=>t({model:n}),setAvailableModels:n=>t({availableModels:n}),addMessage:n=>t(r=>({messages:[...r.messages,{...n,id:Math.random().toString(36).substr(2,9),timestamp:new Date}]})),clearMessages:()=>t({messages:[]}),archiveMessages:()=>{const n=e(),r={messages:n.messages,timestamp:new Date().toISOString(),provider:n.provider,model:n.model,mode:n.mode};try{const s=JSON.parse(localStorage.getItem("yumi-chat-archives")||"[]");s.push(r),localStorage.setItem("yumi-chat-archives",JSON.stringify(s)),console.log("ğŸ—„ï¸ Chat archived successfully!",r)}catch(s){console.warn("Failed to save to localStorage:",s),console.log("ğŸ—„ï¸ Chat archived (localStorage unavailable):",r)}},setCurrentView:n=>t({currentView:n}),setPreviewCode:n=>t({previewCode:n}),setLoading:n=>t({isLoading:n}),setLanguage:n=>{t({language:n}),localStorage.setItem("yumiLanguage",n)},setShowLayoutCustomizer:n=>t({showLayoutCustomizer:n}),setInstalledModes:n=>t({installedModes:n})}));var q;(t=>{t.ErrorType={NETWORK:"NETWORK",RATE_LIMIT:"RATE_LIMIT",AUTH:"AUTH",PERMISSION:"PERMISSION",SERVER:"SERVER",VALIDATION:"VALIDATION",UNKNOWN:"UNKNOWN"}})(q||(q={}));function wn(t,e=0){if(t&&typeof t=="object"&&"status"in t){const n=t,r=t.data||{},s={error:r.error||n.statusText,details:r.details,type:q.ErrorType.UNKNOWN,isRetryable:!1,retryCount:e};switch(n.status){case 429:return{...s,type:q.ErrorType.RATE_LIMIT,retryAfter:r.retryAfter||60,isRetryable:!0};case 401:return{...s,type:q.ErrorType.AUTH,isRetryable:!1};case 403:return{...s,type:q.ErrorType.PERMISSION,isRetryable:!1};case 422:return{...s,type:q.ErrorType.VALIDATION,isRetryable:!1};case 500:case 502:case 503:case 504:return{...s,type:q.ErrorType.SERVER,isRetryable:!0};default:return s}}if(t instanceof Error){const n=t.message.toLowerCase().includes("network")||t.message.toLowerCase().includes("fetch");return{error:t.message,type:n?q.ErrorType.NETWORK:q.ErrorType.UNKNOWN,isRetryable:n,retryCount:e}}return{error:String(t),type:q.ErrorType.UNKNOWN,isRetryable:!1,retryCount:e}}function bn(t,e=500){return t.type===q.ErrorType.RATE_LIMIT&&t.retryAfter?t.retryAfter*1e3:e*Math.pow(2,t.retryCount||0)}function vn(t,e){return t.isRetryable&&(t.retryCount||0)<e}function Et(t,e){return function(){return t.apply(e,arguments)}}const{toString:Sn}=Object.prototype,{getPrototypeOf:Fe}=Object,{iterator:me,toStringTag:At}=Symbol,ge=(t=>e=>{const n=Sn.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),M=t=>(t=t.toLowerCase(),e=>ge(e)===t),ye=t=>e=>typeof e===t,{isArray:Z}=Array,re=ye("undefined");function En(t){return t!==null&&!re(t)&&t.constructor!==null&&!re(t.constructor)&&I(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Ct=M("ArrayBuffer");function An(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Ct(t.buffer),e}const Cn=ye("string"),I=ye("function"),Nt=ye("number"),we=t=>t!==null&&typeof t=="object",Nn=t=>t===!0||t===!1,le=t=>{if(ge(t)!=="object")return!1;const e=Fe(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(At in t)&&!(me in t)},On=M("Date"),Tn=M("File"),Rn=M("Blob"),kn=M("FileList"),xn=t=>we(t)&&I(t.pipe),Pn=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||I(t.append)&&((e=ge(t))==="formdata"||e==="object"&&I(t.toString)&&t.toString()==="[object FormData]"))},In=M("URLSearchParams"),[Ln,_n,qn,Mn]=["ReadableStream","Request","Response","Headers"].map(M),Dn=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function oe(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Z(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const o=n?Object.getOwnPropertyNames(t):Object.keys(t),i=o.length;let a;for(r=0;r<i;r++)a=o[r],e.call(null,t[a],a,t)}}function Ot(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const W=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Tt=t=>!re(t)&&t!==W;function xe(){const{caseless:t}=Tt(this)&&this||{},e={},n=(r,s)=>{const o=t&&Ot(e,s)||s;le(e[o])&&le(r)?e[o]=xe(e[o],r):le(r)?e[o]=xe({},r):Z(r)?e[o]=r.slice():e[o]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&oe(arguments[r],n);return e}const jn=(t,e,n,{allOwnKeys:r}={})=>(oe(e,(s,o)=>{n&&I(s)?t[o]=Et(s,n):t[o]=s},{allOwnKeys:r}),t),Un=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Fn=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Hn=(t,e,n,r)=>{let s,o,i;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),o=s.length;o-- >0;)i=s[o],(!r||r(i,t,e))&&!a[i]&&(e[i]=t[i],a[i]=!0);t=n!==!1&&Fe(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},$n=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},Bn=t=>{if(!t)return null;if(Z(t))return t;let e=t.length;if(!Nt(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},zn=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Fe(Uint8Array)),Wn=(t,e)=>{const r=(t&&t[me]).call(t);let s;for(;(s=r.next())&&!s.done;){const o=s.value;e.call(t,o[0],o[1])}},Kn=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Gn=M("HTMLFormElement"),Vn=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),Ke=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Jn=M("RegExp"),Rt=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};oe(n,(s,o)=>{let i;(i=e(s,o,t))!==!1&&(r[o]=i||s)}),Object.defineProperties(t,r)},Xn=t=>{Rt(t,(e,n)=>{if(I(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(I(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Yn=(t,e)=>{const n={},r=s=>{s.forEach(o=>{n[o]=!0})};return Z(t)?r(t):r(String(t).split(e)),n},Qn=()=>{},Zn=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function er(t){return!!(t&&I(t.append)&&t[At]==="FormData"&&t[me])}const tr=t=>{const e=new Array(10),n=(r,s)=>{if(we(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const o=Z(r)?[]:{};return oe(r,(i,a)=>{const u=n(i,s+1);!re(u)&&(o[a]=u)}),e[s]=void 0,o}}return r};return n(t,0)},nr=M("AsyncFunction"),rr=t=>t&&(we(t)||I(t))&&I(t.then)&&I(t.catch),kt=((t,e)=>t?setImmediate:e?((n,r)=>(W.addEventListener("message",({source:s,data:o})=>{s===W&&o===n&&r.length&&r.shift()()},!1),s=>{r.push(s),W.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",I(W.postMessage)),sr=typeof queueMicrotask<"u"?queueMicrotask.bind(W):typeof process<"u"&&process.nextTick||kt,or=t=>t!=null&&I(t[me]),l={isArray:Z,isArrayBuffer:Ct,isBuffer:En,isFormData:Pn,isArrayBufferView:An,isString:Cn,isNumber:Nt,isBoolean:Nn,isObject:we,isPlainObject:le,isReadableStream:Ln,isRequest:_n,isResponse:qn,isHeaders:Mn,isUndefined:re,isDate:On,isFile:Tn,isBlob:Rn,isRegExp:Jn,isFunction:I,isStream:xn,isURLSearchParams:In,isTypedArray:zn,isFileList:kn,forEach:oe,merge:xe,extend:jn,trim:Dn,stripBOM:Un,inherits:Fn,toFlatObject:Hn,kindOf:ge,kindOfTest:M,endsWith:$n,toArray:Bn,forEachEntry:Wn,matchAll:Kn,isHTMLForm:Gn,hasOwnProperty:Ke,hasOwnProp:Ke,reduceDescriptors:Rt,freezeMethods:Xn,toObjectSet:Yn,toCamelCase:Vn,noop:Qn,toFiniteNumber:Zn,findKey:Ot,global:W,isContextDefined:Tt,isSpecCompliantForm:er,toJSONObject:tr,isAsyncFn:nr,isThenable:rr,setImmediate:kt,asap:sr,isIterable:or};function v(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}l.inherits(v,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:l.toJSONObject(this.config),code:this.code,status:this.status}}});const xt=v.prototype,Pt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Pt[t]={value:t}});Object.defineProperties(v,Pt);Object.defineProperty(xt,"isAxiosError",{value:!0});v.from=(t,e,n,r,s,o)=>{const i=Object.create(xt);return l.toFlatObject(t,i,function(u){return u!==Error.prototype},a=>a!=="isAxiosError"),v.call(i,t.message,e,n,r,s),i.cause=t,i.name=t.name,o&&Object.assign(i,o),i};const ir=null;function Pe(t){return l.isPlainObject(t)||l.isArray(t)}function It(t){return l.endsWith(t,"[]")?t.slice(0,-2):t}function Ge(t,e,n){return t?t.concat(e).map(function(s,o){return s=It(s),!n&&o?"["+s+"]":s}).join(n?".":""):e}function ar(t){return l.isArray(t)&&!t.some(Pe)}const cr=l.toFlatObject(l,{},null,function(e){return/^is[A-Z]/.test(e)});function be(t,e,n){if(!l.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=l.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,g){return!l.isUndefined(g[y])});const r=n.metaTokens,s=n.visitor||h,o=n.dots,i=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&l.isSpecCompliantForm(e);if(!l.isFunction(s))throw new TypeError("visitor must be a function");function d(m){if(m===null)return"";if(l.isDate(m))return m.toISOString();if(l.isBoolean(m))return m.toString();if(!u&&l.isBlob(m))throw new v("Blob is not supported. Use a Buffer instead.");return l.isArrayBuffer(m)||l.isTypedArray(m)?u&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function h(m,y,g){let N=m;if(m&&!g&&typeof m=="object"){if(l.endsWith(y,"{}"))y=r?y:y.slice(0,-2),m=JSON.stringify(m);else if(l.isArray(m)&&ar(m)||(l.isFileList(m)||l.endsWith(y,"[]"))&&(N=l.toArray(m)))return y=It(y),N.forEach(function(T,A){!(l.isUndefined(T)||T===null)&&e.append(i===!0?Ge([y],A,o):i===null?y:y+"[]",d(T))}),!1}return Pe(m)?!0:(e.append(Ge(g,y,o),d(m)),!1)}const f=[],w=Object.assign(cr,{defaultVisitor:h,convertValue:d,isVisitable:Pe});function E(m,y){if(!l.isUndefined(m)){if(f.indexOf(m)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(m),l.forEach(m,function(N,b){(!(l.isUndefined(N)||N===null)&&s.call(e,N,l.isString(b)?b.trim():b,y,w))===!0&&E(N,y?y.concat(b):[b])}),f.pop()}}if(!l.isObject(t))throw new TypeError("data must be an object");return E(t),e}function Ve(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function He(t,e){this._pairs=[],t&&be(t,this,e)}const Lt=He.prototype;Lt.append=function(e,n){this._pairs.push([e,n])};Lt.toString=function(e){const n=e?function(r){return e.call(this,r,Ve)}:Ve;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function lr(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function _t(t,e,n){if(!e)return t;const r=n&&n.encode||lr;l.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let o;if(s?o=s(e,n):o=l.isURLSearchParams(e)?e.toString():new He(e,n).toString(r),o){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class Je{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){l.forEach(this.handlers,function(r){r!==null&&e(r)})}}const qt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ur=typeof URLSearchParams<"u"?URLSearchParams:He,dr=typeof FormData<"u"?FormData:null,hr=typeof Blob<"u"?Blob:null,fr={isBrowser:!0,classes:{URLSearchParams:ur,FormData:dr,Blob:hr},protocols:["http","https","file","blob","url","data"]},$e=typeof window<"u"&&typeof document<"u",Ie=typeof navigator=="object"&&navigator||void 0,pr=$e&&(!Ie||["ReactNative","NativeScript","NS"].indexOf(Ie.product)<0),mr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",gr=$e&&window.location.href||"http://localhost",yr=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$e,hasStandardBrowserEnv:pr,hasStandardBrowserWebWorkerEnv:mr,navigator:Ie,origin:gr},Symbol.toStringTag,{value:"Module"})),P={...yr,...fr};function wr(t,e){return be(t,new P.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,o){return P.isNode&&l.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function br(t){return l.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function vr(t){const e={},n=Object.keys(t);let r;const s=n.length;let o;for(r=0;r<s;r++)o=n[r],e[o]=t[o];return e}function Mt(t){function e(n,r,s,o){let i=n[o++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),u=o>=n.length;return i=!i&&l.isArray(s)?s.length:i,u?(l.hasOwnProp(s,i)?s[i]=[s[i],r]:s[i]=r,!a):((!s[i]||!l.isObject(s[i]))&&(s[i]=[]),e(n,r,s[i],o)&&l.isArray(s[i])&&(s[i]=vr(s[i])),!a)}if(l.isFormData(t)&&l.isFunction(t.entries)){const n={};return l.forEachEntry(t,(r,s)=>{e(br(r),s,n,0)}),n}return null}function Sr(t,e,n){if(l.isString(t))try{return(e||JSON.parse)(t),l.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const ie={transitional:qt,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,o=l.isObject(e);if(o&&l.isHTMLForm(e)&&(e=new FormData(e)),l.isFormData(e))return s?JSON.stringify(Mt(e)):e;if(l.isArrayBuffer(e)||l.isBuffer(e)||l.isStream(e)||l.isFile(e)||l.isBlob(e)||l.isReadableStream(e))return e;if(l.isArrayBufferView(e))return e.buffer;if(l.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return wr(e,this.formSerializer).toString();if((a=l.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return be(a?{"files[]":e}:e,u&&new u,this.formSerializer)}}return o||s?(n.setContentType("application/json",!1),Sr(e)):e}],transformResponse:[function(e){const n=this.transitional||ie.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(l.isResponse(e)||l.isReadableStream(e))return e;if(e&&l.isString(e)&&(r&&!this.responseType||s)){const i=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?v.from(a,v.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:P.classes.FormData,Blob:P.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};l.forEach(["delete","get","head","post","put","patch"],t=>{ie.headers[t]={}});const Er=l.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ar=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(i){s=i.indexOf(":"),n=i.substring(0,s).trim().toLowerCase(),r=i.substring(s+1).trim(),!(!n||e[n]&&Er[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Xe=Symbol("internals");function te(t){return t&&String(t).trim().toLowerCase()}function ue(t){return t===!1||t==null?t:l.isArray(t)?t.map(ue):String(t)}function Cr(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const Nr=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ee(t,e,n,r,s){if(l.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!l.isString(e)){if(l.isString(r))return e.indexOf(r)!==-1;if(l.isRegExp(r))return r.test(e)}}function Or(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function Tr(t,e){const n=l.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,o,i){return this[r].call(this,e,s,o,i)},configurable:!0})})}let L=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function o(a,u,d){const h=te(u);if(!h)throw new Error("header name must be a non-empty string");const f=l.findKey(s,h);(!f||s[f]===void 0||d===!0||d===void 0&&s[f]!==!1)&&(s[f||u]=ue(a))}const i=(a,u)=>l.forEach(a,(d,h)=>o(d,h,u));if(l.isPlainObject(e)||e instanceof this.constructor)i(e,n);else if(l.isString(e)&&(e=e.trim())&&!Nr(e))i(Ar(e),n);else if(l.isObject(e)&&l.isIterable(e)){let a={},u,d;for(const h of e){if(!l.isArray(h))throw TypeError("Object iterator must return a key-value pair");a[d=h[0]]=(u=a[d])?l.isArray(u)?[...u,h[1]]:[u,h[1]]:h[1]}i(a,n)}else e!=null&&o(n,e,r);return this}get(e,n){if(e=te(e),e){const r=l.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return Cr(s);if(l.isFunction(n))return n.call(this,s,r);if(l.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=te(e),e){const r=l.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Ee(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function o(i){if(i=te(i),i){const a=l.findKey(r,i);a&&(!n||Ee(r,r[a],a,n))&&(delete r[a],s=!0)}}return l.isArray(e)?e.forEach(o):o(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const o=n[r];(!e||Ee(this,this[o],o,e,!0))&&(delete this[o],s=!0)}return s}normalize(e){const n=this,r={};return l.forEach(this,(s,o)=>{const i=l.findKey(r,o);if(i){n[i]=ue(s),delete n[o];return}const a=e?Or(o):String(o).trim();a!==o&&delete n[o],n[a]=ue(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return l.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&l.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[Xe]=this[Xe]={accessors:{}}).accessors,s=this.prototype;function o(i){const a=te(i);r[a]||(Tr(s,i),r[a]=!0)}return l.isArray(e)?e.forEach(o):o(e),this}};L.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);l.reduceDescriptors(L.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});l.freezeMethods(L);function Ae(t,e){const n=this||ie,r=e||n,s=L.from(r.headers);let o=r.data;return l.forEach(t,function(a){o=a.call(n,o,s.normalize(),e?e.status:void 0)}),s.normalize(),o}function Dt(t){return!!(t&&t.__CANCEL__)}function ee(t,e,n){v.call(this,t??"canceled",v.ERR_CANCELED,e,n),this.name="CanceledError"}l.inherits(ee,v,{__CANCEL__:!0});function jt(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new v("Request failed with status code "+n.status,[v.ERR_BAD_REQUEST,v.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Rr(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function kr(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,o=0,i;return e=e!==void 0?e:1e3,function(u){const d=Date.now(),h=r[o];i||(i=d),n[s]=u,r[s]=d;let f=o,w=0;for(;f!==s;)w+=n[f++],f=f%t;if(s=(s+1)%t,s===o&&(o=(o+1)%t),d-i<e)return;const E=h&&d-h;return E?Math.round(w*1e3/E):void 0}}function xr(t,e){let n=0,r=1e3/e,s,o;const i=(d,h=Date.now())=>{n=h,s=null,o&&(clearTimeout(o),o=null),t.apply(null,d)};return[(...d)=>{const h=Date.now(),f=h-n;f>=r?i(d,h):(s=d,o||(o=setTimeout(()=>{o=null,i(s)},r-f)))},()=>s&&i(s)]}const he=(t,e,n=3)=>{let r=0;const s=kr(50,250);return xr(o=>{const i=o.loaded,a=o.lengthComputable?o.total:void 0,u=i-r,d=s(u),h=i<=a;r=i;const f={loaded:i,total:a,progress:a?i/a:void 0,bytes:u,rate:d||void 0,estimated:d&&a&&h?(a-i)/d:void 0,event:o,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(f)},n)},Ye=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},Qe=t=>(...e)=>l.asap(()=>t(...e)),Pr=P.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,P.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(P.origin),P.navigator&&/(msie|trident)/i.test(P.navigator.userAgent)):()=>!0,Ir=P.hasStandardBrowserEnv?{write(t,e,n,r,s,o){const i=[t+"="+encodeURIComponent(e)];l.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),l.isString(r)&&i.push("path="+r),l.isString(s)&&i.push("domain="+s),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Lr(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function _r(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Ut(t,e,n){let r=!Lr(e);return t&&(r||n==!1)?_r(t,e):e}const Ze=t=>t instanceof L?{...t}:t;function G(t,e){e=e||{};const n={};function r(d,h,f,w){return l.isPlainObject(d)&&l.isPlainObject(h)?l.merge.call({caseless:w},d,h):l.isPlainObject(h)?l.merge({},h):l.isArray(h)?h.slice():h}function s(d,h,f,w){if(l.isUndefined(h)){if(!l.isUndefined(d))return r(void 0,d,f,w)}else return r(d,h,f,w)}function o(d,h){if(!l.isUndefined(h))return r(void 0,h)}function i(d,h){if(l.isUndefined(h)){if(!l.isUndefined(d))return r(void 0,d)}else return r(void 0,h)}function a(d,h,f){if(f in e)return r(d,h);if(f in t)return r(void 0,d)}const u={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(d,h,f)=>s(Ze(d),Ze(h),f,!0)};return l.forEach(Object.keys(Object.assign({},t,e)),function(h){const f=u[h]||s,w=f(t[h],e[h],h);l.isUndefined(w)&&f!==a||(n[h]=w)}),n}const Ft=t=>{const e=G({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:o,headers:i,auth:a}=e;e.headers=i=L.from(i),e.url=_t(Ut(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let u;if(l.isFormData(n)){if(P.hasStandardBrowserEnv||P.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((u=i.getContentType())!==!1){const[d,...h]=u?u.split(";").map(f=>f.trim()).filter(Boolean):[];i.setContentType([d||"multipart/form-data",...h].join("; "))}}if(P.hasStandardBrowserEnv&&(r&&l.isFunction(r)&&(r=r(e)),r||r!==!1&&Pr(e.url))){const d=s&&o&&Ir.read(o);d&&i.set(s,d)}return e},qr=typeof XMLHttpRequest<"u",Mr=qr&&function(t){return new Promise(function(n,r){const s=Ft(t);let o=s.data;const i=L.from(s.headers).normalize();let{responseType:a,onUploadProgress:u,onDownloadProgress:d}=s,h,f,w,E,m;function y(){E&&E(),m&&m(),s.cancelToken&&s.cancelToken.unsubscribe(h),s.signal&&s.signal.removeEventListener("abort",h)}let g=new XMLHttpRequest;g.open(s.method.toUpperCase(),s.url,!0),g.timeout=s.timeout;function N(){if(!g)return;const T=L.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),x={data:!a||a==="text"||a==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:T,config:t,request:g};jt(function(F){n(F),y()},function(F){r(F),y()},x),g=null}"onloadend"in g?g.onloadend=N:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(N)},g.onabort=function(){g&&(r(new v("Request aborted",v.ECONNABORTED,t,g)),g=null)},g.onerror=function(){r(new v("Network Error",v.ERR_NETWORK,t,g)),g=null},g.ontimeout=function(){let A=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const x=s.transitional||qt;s.timeoutErrorMessage&&(A=s.timeoutErrorMessage),r(new v(A,x.clarifyTimeoutError?v.ETIMEDOUT:v.ECONNABORTED,t,g)),g=null},o===void 0&&i.setContentType(null),"setRequestHeader"in g&&l.forEach(i.toJSON(),function(A,x){g.setRequestHeader(x,A)}),l.isUndefined(s.withCredentials)||(g.withCredentials=!!s.withCredentials),a&&a!=="json"&&(g.responseType=s.responseType),d&&([w,m]=he(d,!0),g.addEventListener("progress",w)),u&&g.upload&&([f,E]=he(u),g.upload.addEventListener("progress",f),g.upload.addEventListener("loadend",E)),(s.cancelToken||s.signal)&&(h=T=>{g&&(r(!T||T.type?new ee(null,t,g):T),g.abort(),g=null)},s.cancelToken&&s.cancelToken.subscribe(h),s.signal&&(s.signal.aborted?h():s.signal.addEventListener("abort",h)));const b=Rr(s.url);if(b&&P.protocols.indexOf(b)===-1){r(new v("Unsupported protocol "+b+":",v.ERR_BAD_REQUEST,t));return}g.send(o||null)})},Dr=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const o=function(d){if(!s){s=!0,a();const h=d instanceof Error?d:this.reason;r.abort(h instanceof v?h:new ee(h instanceof Error?h.message:h))}};let i=e&&setTimeout(()=>{i=null,o(new v(`timeout ${e} of ms exceeded`,v.ETIMEDOUT))},e);const a=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),t=null)};t.forEach(d=>d.addEventListener("abort",o));const{signal:u}=r;return u.unsubscribe=()=>l.asap(a),u}},jr=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},Ur=async function*(t,e){for await(const n of Fr(t))yield*jr(n,e)},Fr=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},et=(t,e,n,r)=>{const s=Ur(t,e);let o=0,i,a=u=>{i||(i=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:d,value:h}=await s.next();if(d){a(),u.close();return}let f=h.byteLength;if(n){let w=o+=f;n(w)}u.enqueue(new Uint8Array(h))}catch(d){throw a(d),d}},cancel(u){return a(u),s.return()}},{highWaterMark:2})},ve=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Ht=ve&&typeof ReadableStream=="function",Hr=ve&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),$t=(t,...e)=>{try{return!!t(...e)}catch{return!1}},$r=Ht&&$t(()=>{let t=!1;const e=new Request(P.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),tt=64*1024,Le=Ht&&$t(()=>l.isReadableStream(new Response("").body)),fe={stream:Le&&(t=>t.body)};ve&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!fe[e]&&(fe[e]=l.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new v(`Response type '${e}' is not supported`,v.ERR_NOT_SUPPORT,r)})})})(new Response);const Br=async t=>{if(t==null)return 0;if(l.isBlob(t))return t.size;if(l.isSpecCompliantForm(t))return(await new Request(P.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(l.isArrayBufferView(t)||l.isArrayBuffer(t))return t.byteLength;if(l.isURLSearchParams(t)&&(t=t+""),l.isString(t))return(await Hr(t)).byteLength},zr=async(t,e)=>{const n=l.toFiniteNumber(t.getContentLength());return n??Br(e)},Wr=ve&&(async t=>{let{url:e,method:n,data:r,signal:s,cancelToken:o,timeout:i,onDownloadProgress:a,onUploadProgress:u,responseType:d,headers:h,withCredentials:f="same-origin",fetchOptions:w}=Ft(t);d=d?(d+"").toLowerCase():"text";let E=Dr([s,o&&o.toAbortSignal()],i),m;const y=E&&E.unsubscribe&&(()=>{E.unsubscribe()});let g;try{if(u&&$r&&n!=="get"&&n!=="head"&&(g=await zr(h,r))!==0){let x=new Request(e,{method:"POST",body:r,duplex:"half"}),D;if(l.isFormData(r)&&(D=x.headers.get("content-type"))&&h.setContentType(D),x.body){const[F,$]=Ye(g,he(Qe(u)));r=et(x.body,tt,F,$)}}l.isString(f)||(f=f?"include":"omit");const N="credentials"in Request.prototype;m=new Request(e,{...w,signal:E,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:N?f:void 0});let b=await fetch(m,w);const T=Le&&(d==="stream"||d==="response");if(Le&&(a||T&&y)){const x={};["status","statusText","headers"].forEach(ae=>{x[ae]=b[ae]});const D=l.toFiniteNumber(b.headers.get("content-length")),[F,$]=a&&Ye(D,he(Qe(a),!0))||[];b=new Response(et(b.body,tt,F,()=>{$&&$(),y&&y()}),x)}d=d||"text";let A=await fe[l.findKey(fe,d)||"text"](b,t);return!T&&y&&y(),await new Promise((x,D)=>{jt(x,D,{data:A,headers:L.from(b.headers),status:b.status,statusText:b.statusText,config:t,request:m})})}catch(N){throw y&&y(),N&&N.name==="TypeError"&&/Load failed|fetch/i.test(N.message)?Object.assign(new v("Network Error",v.ERR_NETWORK,t,m),{cause:N.cause||N}):v.from(N,N&&N.code,t,m)}}),_e={http:ir,xhr:Mr,fetch:Wr};l.forEach(_e,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const nt=t=>`- ${t}`,Kr=t=>l.isFunction(t)||t===null||t===!1,Bt={getAdapter:t=>{t=l.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let o=0;o<e;o++){n=t[o];let i;if(r=n,!Kr(n)&&(r=_e[(i=String(n)).toLowerCase()],r===void 0))throw new v(`Unknown adapter '${i}'`);if(r)break;s[i||"#"+o]=r}if(!r){const o=Object.entries(s).map(([a,u])=>`adapter ${a} `+(u===!1?"is not supported by the environment":"is not available in the build"));let i=e?o.length>1?`since :
`+o.map(nt).join(`
`):" "+nt(o[0]):"as no adapter specified";throw new v("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:_e};function Ce(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ee(null,t)}function rt(t){return Ce(t),t.headers=L.from(t.headers),t.data=Ae.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Bt.getAdapter(t.adapter||ie.adapter)(t).then(function(r){return Ce(t),r.data=Ae.call(t,t.transformResponse,r),r.headers=L.from(r.headers),r},function(r){return Dt(r)||(Ce(t),r&&r.response&&(r.response.data=Ae.call(t,t.transformResponse,r.response),r.response.headers=L.from(r.response.headers))),Promise.reject(r)})}const zt="1.10.0",Se={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Se[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const st={};Se.transitional=function(e,n,r){function s(o,i){return"[Axios v"+zt+"] Transitional option '"+o+"'"+i+(r?". "+r:"")}return(o,i,a)=>{if(e===!1)throw new v(s(i," has been removed"+(n?" in "+n:"")),v.ERR_DEPRECATED);return n&&!st[i]&&(st[i]=!0,console.warn(s(i," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,i,a):!0}};Se.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function Gr(t,e,n){if(typeof t!="object")throw new v("options must be an object",v.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const o=r[s],i=e[o];if(i){const a=t[o],u=a===void 0||i(a,o,t);if(u!==!0)throw new v("option "+o+" must be "+u,v.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new v("Unknown option "+o,v.ERR_BAD_OPTION)}}const de={assertOptions:Gr,validators:Se},j=de.validators;let K=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Je,response:new Je}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=G(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:o}=n;r!==void 0&&de.assertOptions(r,{silentJSONParsing:j.transitional(j.boolean),forcedJSONParsing:j.transitional(j.boolean),clarifyTimeoutError:j.transitional(j.boolean)},!1),s!=null&&(l.isFunction(s)?n.paramsSerializer={serialize:s}:de.assertOptions(s,{encode:j.function,serialize:j.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),de.assertOptions(n,{baseUrl:j.spelling("baseURL"),withXsrfToken:j.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=o&&l.merge(o.common,o[n.method]);o&&l.forEach(["delete","get","head","post","put","patch","common"],m=>{delete o[m]}),n.headers=L.concat(i,o);const a=[];let u=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(u=u&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const d=[];this.interceptors.response.forEach(function(y){d.push(y.fulfilled,y.rejected)});let h,f=0,w;if(!u){const m=[rt.bind(this),void 0];for(m.unshift.apply(m,a),m.push.apply(m,d),w=m.length,h=Promise.resolve(n);f<w;)h=h.then(m[f++],m[f++]);return h}w=a.length;let E=n;for(f=0;f<w;){const m=a[f++],y=a[f++];try{E=m(E)}catch(g){y.call(this,g);break}}try{h=rt.call(this,E)}catch(m){return Promise.reject(m)}for(f=0,w=d.length;f<w;)h=h.then(d[f++],d[f++]);return h}getUri(e){e=G(this.defaults,e);const n=Ut(e.baseURL,e.url,e.allowAbsoluteUrls);return _t(n,e.params,e.paramsSerializer)}};l.forEach(["delete","get","head","options"],function(e){K.prototype[e]=function(n,r){return this.request(G(r||{},{method:e,url:n,data:(r||{}).data}))}});l.forEach(["post","put","patch"],function(e){function n(r){return function(o,i,a){return this.request(G(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}K.prototype[e]=n(),K.prototype[e+"Form"]=n(!0)});let Vr=class Wt{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(s=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](s);r._listeners=null}),this.promise.then=s=>{let o;const i=new Promise(a=>{r.subscribe(a),o=a}).then(s);return i.cancel=function(){r.unsubscribe(o)},i},e(function(o,i,a){r.reason||(r.reason=new ee(o,i,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Wt(function(s){e=s}),cancel:e}}};function Jr(t){return function(n){return t.apply(null,n)}}function Xr(t){return l.isObject(t)&&t.isAxiosError===!0}const qe={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(qe).forEach(([t,e])=>{qe[e]=t});function Kt(t){const e=new K(t),n=Et(K.prototype.request,e);return l.extend(n,K.prototype,e,{allOwnKeys:!0}),l.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return Kt(G(t,s))},n}const k=Kt(ie);k.Axios=K;k.CanceledError=ee;k.CancelToken=Vr;k.isCancel=Dt;k.VERSION=zt;k.toFormData=be;k.AxiosError=v;k.Cancel=k.CanceledError;k.all=function(e){return Promise.all(e)};k.spread=Jr;k.isAxiosError=Xr;k.mergeConfig=G;k.AxiosHeaders=L;k.formToJSON=t=>Mt(l.isHTMLForm(t)?new FormData(t):t);k.getAdapter=Bt.getAdapter;k.HttpStatusCode=qe;k.default=k;const{Axios:eo,AxiosError:to,CanceledError:no,isCancel:ro,CancelToken:so,VERSION:oo,all:io,Cancel:ao,isAxiosError:co,spread:lo,toFormData:uo,AxiosHeaders:ho,HttpStatusCode:fo,formToJSON:po,getAdapter:mo,mergeConfig:go}=k,Be="https://api.yumi77965.online",Me=k.create({baseURL:Be,withCredentials:!0,headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`,"Has-Cookie-Credentials":"include"}});Me.interceptors.request.use(t=>t,t=>Promise.reject(t));Me.interceptors.response.use(t=>t,async t=>{const e=t.config;if((!e.retryCount||e.retryCount<3)&&(!t.response||t.response.status>=500&&t.response.status<=599)){e.retryCount=(e.retryCount||0)+1;const r=Math.pow(2,e.retryCount-1)*500;return await new Promise(s=>setTimeout(s,r)),Me(e)}return Promise.reject(t)});async function Yr(t,e,n=3,r=500){let s=0,o=null;for(;s<=n;)try{const i=await fetch(t,{...e,credentials:"include",headers:{...e==null?void 0:e.headers}});if(!i.ok){const a=await i.json().catch(()=>({}));throw{status:i.status,statusText:i.statusText,data:a}}return i}catch(i){if(o=wn(i,s),console.error(`[API] Request failed (attempt ${s+1}/${n+1}):`,{error:o.error,type:o.type,isRetryable:o.isRetryable}),vn(o,n)){const a=bn(o,r);console.log(`[API] Retrying in ${a}ms...`),await new Promise(u=>setTimeout(u,a)),s++;continue}throw o}throw o}class Qr{constructor(e=Be){this.baseUrl=e}async request(e,n={}){const r=`${this.baseUrl}${e.startsWith("/")?e:"/"+e}`,s=localStorage.getItem("authToken"),o={"Content-Type":"application/json",...s?{Authorization:`Bearer ${s}`}:{},...n.headers};console.log(`[API][Request] ${n.method||"GET"} ${e}`),console.log("[API][Request] URL:",r),console.log("[API][Request] Headers:",{"Content-Type":o["Content-Type"],Authorization:o.Authorization?`Bearer ${o.Authorization.substring(7,20)}...`:"none","Has-Cookie-Credentials":"include"});try{const i=await Yr(r,{...n,headers:o,credentials:"include"});console.log(`[API][Response] ${n.method||"GET"} ${e} - Status:`,i.status);const a=await i.json();return console.log(`[API][Response] ${n.method||"GET"} ${e} - Data:`,{success:a.success,hasUser:!!a.user,error:a.error}),a}catch(i){throw console.error(`[API][Error] ${n.method||"GET"} ${e} failed:`,i),i}}async get(e){return this.request(e,{method:"GET"})}async post(e,n){return this.request(e,{method:"POST",body:n?JSON.stringify(n):void 0})}async put(e,n){return this.request(e,{method:"PUT",body:n?JSON.stringify(n):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}async chat(e){return this.post("/api/chat",e)}async getModels(){return this.get("/api/models")}async healthCheck(){return this.get("/api/health")}async editWebsite(e){return this.post("/api/edit",{instructions:e})}async generateAnimeCharacter(e,n){return this.post("/api/anime-chara-helper/generate",{prompt:e,settings:n})}async getBillingInfo(){return this.get("/api/billing/info")}async getTokenUsage(){return this.get("/api/billing/token-usage")}}const Zr=new Qr;class es{constructor(){this.baseUrl=Be}async signup(e,n,r){try{console.log("[Auth][Frontend] Starting signup process for:",{email:e,username:n});const s=await fetch(`${this.baseUrl}/api/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,username:n,password:r})});if(!s.ok){const i=await s.json();throw new Error(i.error||"Registration failed")}const o=await s.json();return o.token&&(localStorage.setItem("auth_token",o.token),localStorage.setItem("user",JSON.stringify(o.user))),o}catch(s){throw console.error("[Auth][Frontend] Signup error:",s),s}}async login(e,n){try{console.log("[Auth][Frontend] Starting login process for:",{email:e});const r=await fetch(`${this.baseUrl}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:n})});if(!r.ok){const o=await r.json();throw new Error(o.error||"Login failed")}const s=await r.json();return s.token&&(localStorage.setItem("auth_token",s.token),localStorage.setItem("user",JSON.stringify(s.user))),s}catch(r){throw console.error("[Auth][Frontend] Login error:",r),r}}async logout(){try{return localStorage.removeItem("auth_token"),localStorage.removeItem("user"),{success:!0}}catch(e){return console.error("[Auth][Frontend] Logout error:",e),{success:!1}}}async getProfile(){try{const e=this.getToken();if(!e)return{success:!1,error:"No auth token found"};const n=await fetch(`${this.baseUrl}/api/auth/profile`,{headers:{Authorization:`Bearer ${e}`},credentials:"include"});if(!n.ok){const s=await n.json();throw new Error(s.error||"Failed to fetch profile")}return{success:!0,user:(await n.json()).user}}catch(e){return console.error("[Auth][Frontend] Get profile error:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}getToken(){return localStorage.getItem("auth_token")}getCurrentUser(){const e=localStorage.getItem("user");return e?JSON.parse(e):null}isAuthenticated(){return!!this.getToken()}getAuthHeaders(){const e=this.getToken();return e?{Authorization:`Bearer ${e}`}:{}}}const ot=new es;function ts(){const[t,e]=S.useState([]),[n,r]=S.useState(!1),s=S.useCallback(async(o,i)=>{try{r(!0);const a={role:"user",content:o};e(h=>[...h,a]);const d={role:"assistant",content:(await Zr.post("/api/chat",{message:o,context:i==null?void 0:i.context})).message};e(h=>[...h,d])}catch(a){console.error("Chat error:",a);const u={role:"assistant",content:"Sorry, I encountered an error. Please try again."};e(d=>[...d,u])}finally{r(!1)}},[]);return{messages:t,sendMessage:s,isLoading:n}}const it=[{id:"te-form",title:"ï½ã¦-form ã®ä½¿ã„æ–¹",description:"å‹•è©ã®æ¥ç¶šå½¢ã‚’å­¦ã³ã¾ã—ã‚‡ã†",content:`
      ã¦-form ã¯æ—¥æœ¬èªã®é‡è¦ãªæ–‡æ³•ã§ã™ã€‚
      åŸºæœ¬å½¢ã‹ã‚‰å¤‰æ›ã™ã‚‹æ–¹æ³•ï¼š
      1. ã†æ®µ â†’ ã£ã¦
      2. ãã€ã â†’ ã„ã¦ã€ã„ã§
      3. ã™ â†’ ã—ã¦
      4. ã‚€ã€ã¶ã€ã¬ â†’ ã‚“ã§
      5. ã‚‹ â†’ ã£ã¦
    `,quiz:[{question:"ã€Œé£Ÿã¹ã‚‹ã€ã®ã¦-form ã¯ï¼Ÿ",options:["é£Ÿã¹ã£ã¦","é£Ÿã¹ã¦","é£Ÿã¹ã§","é£Ÿã¹ã‚Œ"],answer:1},{question:"ã€Œæ›¸ãã€ã®ã¦-form ã¯ï¼Ÿ",options:["æ›¸ã£ã¦","æ›¸ã„ã§","æ›¸ã„ã¦","æ›¸ãã¦"],answer:2}]},{id:"kanji-basics",title:"æ¼¢å­—ã®åŸºæœ¬",description:"æ¼¢å­—ã®æ›¸ãæ–¹ã¨èª­ã¿æ–¹",content:`
      æ¼¢å­—ã®åŸºæœ¬çš„ãªæ›¸ãæ–¹ï¼š
      1. ç­†é †ã‚’å®ˆã‚‹
      2. ãƒãƒ©ãƒ³ã‚¹ã‚’æ•´ãˆã‚‹
      3. ã¯ã­ã€ã¯ã‚‰ã„ã€ã¨ã‚ã‚’æ„è­˜ã™ã‚‹
    `,quiz:[{question:"ã€Œæœ¨ã€ã®æ­£ã—ã„ç­†é †ã¯ï¼Ÿ",options:["â†“â†’â†™â†—","â†’â†“â†™â†—","â†—â†™â†“â†’","â†“â†—â†™â†’"],answer:0}]}],ns=()=>{const[t,e]=S.useState(null),[n,r]=S.useState(0),[s,o]=S.useState(!1),[i,a]=S.useState(null),u=t?it.find(f=>f.id===t):null,d=()=>{u&&n<u.quiz.length-1&&(r(f=>f+1),o(!1),a(null))},h=f=>{a(f),o(!0)};return c("div",{className:"sensei-panel",children:t?u?p("div",{className:"lesson-content",children:[c("button",{className:"back-button",onClick:()=>{e(null),r(0),o(!1)},children:"â† ãƒ¬ãƒƒã‚¹ãƒ³ä¸€è¦§ã«æˆ»ã‚‹"}),c("h3",{children:u.title}),c("div",{className:"lesson-explanation",children:c("pre",{children:u.content})}),p("div",{className:"quiz-section",children:[c("h4",{children:"ç¢ºèªã‚¯ã‚¤ã‚º"}),p("div",{className:"quiz-card",children:[c("p",{className:"quiz-question",children:u.quiz[n].question}),c("div",{className:"quiz-options",children:u.quiz[n].options.map((f,w)=>c("button",{onClick:()=>h(w),className:`quiz-option ${s?w===u.quiz[n].answer?"correct":i===w?"incorrect":"":i===w?"selected":""}`,disabled:s,children:f},w))}),s&&p("div",{className:"quiz-feedback",children:[i===u.quiz[n].answer?c("p",{className:"correct-feedback",children:"æ­£è§£ã§ã™ï¼"}):p("p",{className:"incorrect-feedback",children:["ä¸æ­£è§£ã§ã™ã€‚æ­£ã—ã„ç­”ãˆã¯ã€Œ",u.quiz[n].options[u.quiz[n].answer],"ã€ã§ã™ã€‚"]}),n<u.quiz.length-1&&c("button",{className:"next-quiz-button",onClick:d,children:"æ¬¡ã®å•é¡Œã¸ â†’"})]})]})]})]}):null:p("div",{className:"lesson-list",children:[c("h3",{children:"æ—¥æœ¬èªãƒ¬ãƒƒã‚¹ãƒ³"}),c("div",{className:"lesson-grid",children:it.map(f=>p("div",{className:"lesson-card",onClick:()=>e(f.id),children:[c("h4",{children:f.title}),c("p",{children:f.description})]},f.id))})]})})},Ne=[{id:"current-watching",topic:"ä»ŠæœŸã‚¢ãƒ‹ãƒ¡",prompt:"ã©ã®ã‚¢ãƒ‹ãƒ¡è¦‹ã¦ã‚‹ï¼Ÿç§ã€æœ€è¿‘ã€Œæ¨ã—ã®å­ã€ã«ãƒãƒã£ã¦ã¦ï¼",followUpQuestions:["ãŠæ°—ã«å…¥ã‚Šã®ã‚­ãƒ£ãƒ©ã¯èª°ï¼Ÿ","ã©ã®ã‚·ãƒ¼ãƒ³ãŒä¸€ç•ªå°è±¡çš„ã ã£ãŸï¼Ÿ","EDã®æ›²ã‚‚ã„ã„ã‚ˆã­ï¼"],yumiReactions:["ãˆã‡ï¼ãã®ã‚·ãƒ¼ãƒ³ç§ã‚‚æ³£ã„ã¡ã‚ƒã£ãŸï¼","ã‚ã‹ã‚‹ï¼ãã®ã‚­ãƒ£ãƒ©ç§ã‚‚å¤§å¥½ãï¼","ãã®å±•é–‹ã€äºˆæƒ³å¤–ã ã£ãŸã‚ˆã­ï¼"],emoji:"ğŸ“º"},{id:"all-time-favorite",topic:"äººç”Ÿã‚¢ãƒ‹ãƒ¡",prompt:"äººç”Ÿã§ä¸€ç•ªå½±éŸ¿ã‚’å—ã‘ãŸã‚¢ãƒ‹ãƒ¡ã£ã¦ã‚ã‚‹ï¼Ÿç§ã¯ã€Œæ¶¼å®®ãƒãƒ«ãƒ’ã€ã‹ãª...",followUpQuestions:["ã©ã‚“ãªã¨ã“ã‚ãŒå¿ƒã«æ®‹ã£ã¦ã‚‹ï¼Ÿ","ã¾ãŸè¦‹è¿”ã—ãŸã‚Šã™ã‚‹ï¼Ÿ","ä¼¼ã¦ã‚‹ã‚¢ãƒ‹ãƒ¡ã§å¥½ããªã®ã‚ã‚‹ï¼Ÿ"],yumiReactions:["ã™ã”ãã‚ã‹ã‚‹...ãã®ã‚¢ãƒ‹ãƒ¡ã€ç§ã®é’æ˜¥ã ã£ãŸãª","ã„ã„ã‚ˆã­ï¼ç§ã‚‚ãã“å¥½ãï¼","ã¸ã‡ï½ã€ãã‚“ãªè¦‹æ–¹ãŒã‚ã£ãŸã‚“ã ï¼é¢ç™½ã„ï¼"],emoji:"ğŸ’–"}],rs=[{id:"classic-1",question:"ã‚¨ãƒ´ã‚¡ãƒ³ã‚²ãƒªã‚ªãƒ³ã®ã€Œäººé¡è£œå®Œè¨ˆç”»ã€ã£ã¦çŸ¥ã£ã¦ã‚‹ï¼Ÿ",context:"å®Ÿã¯ã“ã‚Œã€äººé¡ã®é­‚ã‚’ä¸€ã¤ã«çµ±åˆã™ã‚‹è¨ˆç”»ãªã‚“ã ã‚ˆã­ã€‚ã§ã‚‚ã€ãã‚Œã£ã¦æœ¬å½“ã«äººé¡ã®å¹¸ã›ãªã®ã‹ãªï¼Ÿ",yumiAnswer:"äººé¡ã®å­¤ç‹¬ã‚’è§£æ¶ˆã™ã‚‹ãŸã‚ã®è¨ˆç”»ã ã‘ã©ã€å€‹æ€§ãŒå¤±ã‚ã‚Œã¡ã‚ƒã†ã‚“ã ã‚ˆã­...",yumiReaction:"ç§ã¯ã‚·ãƒ³ã‚¸ãã‚“ã®é¸æŠãŒå¥½ãï¼å€‹æ€§ã‚„é•ã„ã‚’èªã‚åˆãˆã‚‹ä¸–ç•Œã®æ–¹ãŒã„ã„ã¨æ€ã†ï¼",category:"classic",difficulty:2},{id:"meme-1",question:"ã€Œã ãŒæ–­ã‚‹ã€ã£ã¦ã‚»ãƒªãƒ•ã€ã©ã“ã®ã‚¢ãƒ‹ãƒ¡ã‹åˆ†ã‹ã‚‹ï¼Ÿ",context:"ã“ã®ã‚»ãƒªãƒ•ã€ã‚ã£ã¡ã‚ƒãƒŸãƒ¼ãƒ åŒ–ã•ã‚Œã¦ã‚‹ã‚ˆã­ï¼",yumiAnswer:"ã‚¸ãƒ§ã‚¸ãƒ§ã®å²¸è¾ºéœ²ä¼´ã®ã‚»ãƒªãƒ•ã ã‚ˆï¼",yumiReaction:"éœ²ä¼´å…ˆç”Ÿã‹ã£ã“ã‚ˆã™ãï¼ç§ã‚‚ãŸã¾ã«ä½¿ã£ã¡ã‚ƒã†ï¼ˆç¬‘ï¼‰",category:"meme",difficulty:1}],ss=[{id:"rec-1",title:"ãƒªã‚³ãƒªã‚¹ãƒ»ãƒªã‚³ã‚¤ãƒ«",description:"å¯æ„›ã„å¥³ã®å­ãŸã¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³Ã—æ—¥å¸¸ç³»ã‚¢ãƒ‹ãƒ¡ï¼",yumiThoughts:"ã‚‚ã†ã€åƒæŸã¡ã‚ƒã‚“ã®å…ƒæ°—ã•ã¨éŒ¦æœ¨ã•ã‚“ã®ã‚¯ãƒ¼ãƒ«ã•ã®ã‚®ãƒ£ãƒƒãƒ—ãŒãŸã¾ã‚‰ãªã„ï¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚·ãƒ¼ãƒ³ã‚‚ã™ã”ãæµæš¢ã§ã€æ—¥å¸¸ãƒ‘ãƒ¼ãƒˆã‚‚å¯æ„›ãã¦ã€è¦‹ã¦ã¦é£½ããªã„ã®ï¼",similarTo:["RELEASE THE SPYCE","ãƒ—ãƒªãƒ³ã‚»ã‚¹ãƒ»ãƒ—ãƒªãƒ³ã‚·ãƒ‘ãƒ«"],tags:["ã‚¢ã‚¯ã‚·ãƒ§ãƒ³","æ—¥å¸¸","ç™¾åˆ"],imageUrl:"/references/anime/lycoris.jpg"}],Oe=[{level:1,description:"ã‚¢ãƒ‹ãƒ¡åˆå¿ƒè€…",reaction:"ä¸€ç·’ã«ã‚¢ãƒ‹ãƒ¡ã®ä¸–ç•Œã‚’æ¢æ¤œã—ã‚ˆã†ï¼",unlockMessage:"ğŸŒ± ã‚¢ãƒ‹ãƒ¡æ¢æ¤œã®æ—…ãŒå§‹ã¾ã‚Šã¾ã—ãŸï¼"},{level:2,description:"ã‚¢ãƒ‹ãƒ¡æ„›å¥½å®¶",reaction:"ã‚¢ãƒ‹ãƒ¡ã«ã¤ã„ã¦èªã‚Šåˆãˆã¦å¬‰ã—ã„ï¼",unlockMessage:"ğŸŒŸ çœŸã®ã‚¢ãƒ‹ãƒ¡ãƒ•ã‚¡ãƒ³ã®è¨¼ã‚’ç²å¾—ï¼"},{level:3,description:"æœ¬ç‰©ã®ã‚ªã‚¿ã‚¯",reaction:"ã‚ãªãŸã¨è©±ã›ã¦æœ¬å½“ã«æ¥½ã—ã„ï¼ã‚¢ãƒ‹ãƒ¡æ„›ã‚’æ„Ÿã˜ã‚‹ï¼",unlockMessage:"ğŸ‘‘ ã‚ªã‚¿ã‚¯ç´”åº¦MAXé”æˆï¼"}],os=()=>{const[t,e]=S.useState("excited"),[n,r]=S.useState(Oe[0]),[s,o]=S.useState([]),[i,a]=S.useState(Ne[0]),[u,d]=S.useState(""),[h,f]=S.useState(!1),[w,E]=S.useState({currentLevel:1,discussions:[],unlockedAchievements:[],favoriteAnime:[],sharedInterests:[]});S.useEffect(()=>{s.length>=5&&n.level===1?r(Oe[1]):s.length>=10&&n.level===2&&r(Oe[2])},[s]);const m=()=>{if(!u.trim())return;const b={topic:i.topic,userResponse:u,mood:n.level,timestamp:Date.now()},T=i.yumiReactions[Math.floor(Math.random()*i.yumiReactions.length)];o(x=>[...x,{...b,yumiResponse:T}]),d("");const A=Ne[Math.floor(Math.random()*Ne.length)];a(A)},y=()=>{f(!0)};return c("div",{className:"otaku-panel",children:h?p("div",{className:"purity-test",children:[c("button",{className:"back-button",onClick:()=>f(!1),children:"â† ãƒãƒ£ãƒƒãƒˆã«æˆ»ã‚‹"}),p("div",{className:"test-intro",children:[c("h3",{children:"ã‚ªã‚¿ã‚¯ç´”åº¦ãƒ†ã‚¹ãƒˆ"}),c("p",{children:"ã“ã‚Œã¯ãƒ†ã‚¹ãƒˆã˜ã‚ƒãªã„ã‚ˆï¼ä¸€ç·’ã«ã‚¢ãƒ‹ãƒ¡ã«ã¤ã„ã¦èªã‚ŠåˆãŠã†ï¼"})]}),c("div",{className:"test-content",children:rs.map(b=>p("div",{className:"question-card",children:[p("div",{className:"question-header",children:[c("span",{className:"category-tag",children:b.category}),c("span",{className:"difficulty",children:"â­".repeat(b.difficulty)})]}),c("p",{className:"question-text",children:b.question}),c("p",{className:"context-text",children:b.context}),p("div",{className:"yumi-answer",children:[c("img",{src:"/references/yumi-6.png",alt:"Yumi",className:"yumi-avatar"}),p("div",{className:"answer-content",children:[c("p",{children:b.yumiAnswer}),c("p",{className:"reaction",children:b.yumiReaction})]})]})]},b.id))})]}):p("div",{className:"anime-chat",children:[p("div",{className:"mood-indicator",children:[p("div",{className:"mood-level",children:[c("span",{className:"mood-emoji",children:i.emoji}),c("span",{className:"mood-text",children:n.description})]}),n.unlockMessage&&c("div",{className:"unlock-message",children:n.unlockMessage})]}),c("div",{className:"chat-history",children:s.map((b,T)=>p("div",{className:"chat-entry",children:[c("div",{className:"user-message",children:c("span",{className:"message-text",children:b.userResponse})}),b.yumiResponse&&p("div",{className:"yumi-message",children:[c("img",{src:"/references/yumi-6.png",alt:"Yumi",className:"yumi-avatar"}),c("span",{className:"message-text",children:b.yumiResponse})]})]},T))}),p("div",{className:"current-topic",children:[p("div",{className:"topic-prompt",children:[c("img",{src:"/references/yumi-6.png",alt:"Yumi",className:"yumi-avatar"}),c("span",{className:"prompt-text",children:i.prompt})]}),p("div",{className:"topic-input",children:[c("input",{type:"text",value:u,onChange:b=>d(b.target.value),onKeyPress:b=>b.key==="Enter"&&m(),placeholder:"ã‚¢ãƒ‹ãƒ¡ã«ã¤ã„ã¦è©±ãã†ï¼"}),c("button",{onClick:m,children:"é€ä¿¡"})]})]}),p("div",{className:"quick-actions",children:[c("button",{className:"purity-test-button",onClick:y,children:"ã‚ªã‚¿ã‚¯ç´”åº¦ãƒ†ã‚¹ãƒˆ ğŸ’«"}),p("div",{className:"weekly-recommendation",children:[c("h4",{children:"ä»Šé€±ã®ãŠã™ã™ã‚"}),ss.map(b=>p("div",{className:"recommendation-card",children:[c("img",{src:b.imageUrl,alt:b.title}),p("div",{className:"recommendation-content",children:[c("h5",{children:b.title}),c("p",{children:b.description}),p("div",{className:"yumi-thoughts",children:[c("img",{src:"/references/yumi-6.png",alt:"Yumi",className:"yumi-avatar-small"}),c("p",{children:b.yumiThoughts})]})]})]},b.id))]})]})]})})},at={otaku:{name:"Yumi (Otaku)",description:"Enthusiastic anime and manga expert with v1.2 creative magic",traits:["Passionate about anime","Knows secret v1.2 features","Makes art creation kawaii"],emoji:"ğŸŒ",v12Hint:"I know all the anime-style secrets in v1.2! âœ¨"},tsundere:{name:"Yumi (Tsundere)",description:"Initially cold but gradually shows creative warmth",traits:["Acts tough but creates beautifully","Has secret artistic skills","Dramatic creative flair"],emoji:"ğŸ˜¤",v12Hint:"I-it's not like I care about your art... but maybe I can help a little! ğŸ˜¤"},teacher:{name:"Yumi-sensei",description:"Patient educator with structured v1.2 guidance",traits:["Teaches v1.2 systematically","Academic excellence focused","Encouraging mentor"],emoji:"ğŸ‘©â€ğŸ«",v12Hint:"Let me guide you through the v1.2 features step by step! ğŸ“š"},imouto:{name:"Yumi-chan (Little Sister)",description:"Cheerful little sister who loves cute v1.2 features",traits:["Loves character creation","Curious about new tools","Pure-hearted creativity"],emoji:"ğŸŒŸ",v12Hint:"Onii-chan/Onee-chan! The new features are so cute! Want me to show you? ğŸŒŸ"},classmate:{name:"Yumi (Classmate)",description:"Friendly peer who collaborates on v1.2 projects",traits:["Great creative partner","Collaborative and supportive","Shares cool tricks"],emoji:"ğŸ‘«",v12Hint:"Want to explore the new creative features together? I found some cool tricks! ğŸ‘«"},kuudere:{name:"Yumi (Kuudere)",description:"Cool analyst who understands v1.2's technical depths",traits:["Analytically precise","Technical mastery","Logical creative approach"],emoji:"â„ï¸",v12Hint:"The v1.2 system architecture is... quite sophisticated. I can explain it logically. â„ï¸"},genki:{name:"Yumi (Genki Girl)",description:"Super energetic about all the amazing v1.2 possibilities",traits:["LOVES new features","Infinite creative energy","Spreads excitement"],emoji:"âš¡",v12Hint:"OMG OMG! v1.2 is SO AMAZING! There's SO MUCH cool stuff to try! âš¡"}},is={"writing-helper":[{q:"ğŸ†• What's new in Writing Helper v1.2?",a:"v1.2 introduces Creative Control Levels and intelligent style variations! Generate multiple writing versions (formal, casual, emotional, humorous) with personality-guided refinement. Plus smart iterative feedback that learns your preferences!",isNew:!0},{q:"How do I get started with Writing Helper?",a:"Start by choosing your writing goal: social media posts, blog articles, or creative content. Use the sidebar tools to enhance your writing with AI assistance, trending topics, and collaboration features."},{q:"ğŸ¨ How do Creative Control Levels work?",a:"Choose your creative collaboration style: ğŸ¯ Precise (follow instructions exactly), ğŸ¨ Balanced (smart suggestions), or ğŸ² Freestyle (surprise me with creativity). Each Yumi personality provides unique guidance!",isNew:!0},{q:"âœ¨ What is Generate Versions?",a:"Click 'Generate Versions' to create multiple style variations of your text instantly! The AI creates formal, casual, emotional, and humorous versions, then you can refine with one-click suggestions.",isNew:!0},{q:"What can Writing Helper do?",a:"Writing Helper offers social media posting, AI-powered writing continuation, trending platform search, test writing features, and collaboration with anime characters for creative content like galgame blog posts and novels."},{q:"How do I post to social platforms?",a:"Use the Social Media tools in the sidebar to connect your accounts and schedule posts across multiple platforms with AI-optimized content."},{q:"What is AI writing continuation?",a:"Our AI can analyze your writing style and continue your story, maintaining consistency in tone, character development, and narrative flow."},{q:"How does anime character collaboration work?",a:"You can collaborate with AI anime characters to write creative content like visual novel scripts, character dialogues, and story development."},{q:"How do I use the trending search feature?",a:"The trending search tool helps you find popular topics and hashtags across platforms. Use it to make your content more discoverable and relevant."}],"report-helper":[{q:"ğŸ†• What's new in Report Helper v1.2?",a:"v1.2 adds Academic Report Enhancements with personality-guided research! Generate multiple report versions, get citation-aware suggestions, and let Teacher Yumi guide your scholarly writing with smart iterative refinement.",isNew:!0},{q:"ğŸ“ How do Academic Enhancements work?",a:"The system generates academic-style versions of your content with proper structure, citations, and methodology sections. Teacher Yumi provides scholarly guidance while maintaining your research focus.",isNew:!0},{q:"How do I start writing a scientific report?",a:"Begin with the LaTeX editor for professional formatting. Use the scientific search to find relevant papers, then structure your report with proper citations and references."},{q:"What research capabilities does Report Helper have?",a:"Report Helper specializes in scientific research with access to nature/physics platforms, LaTeX editing, plagiarism prevention, chart generation, and PDF export."},{q:"How does the plagiarism checker work?",a:"Our advanced plagiarism system scans academic databases and provides detailed similarity reports with proper citation suggestions."},{q:"Can I create scientific charts and graphs?",a:"Yes! Use our Chart Generator to create line charts, bar charts, scatter plots, and more with scientific data visualization standards."},{q:"What LaTeX features are available?",a:"Full LaTeX editing with equation builder, mathematical symbols, templates for formulas, and real-time preview functionality."},{q:"How do I export my report as PDF?",a:"Use the export panel to generate high-quality PDFs with proper formatting, citations, and academic styling."}],"anime-chara-helper":[{q:"ğŸ†• What's amazing in v1.2 Character Creation?",a:'v1.2 is INCREDIBLE! ğŸ¨ Character Library with drag-and-drop, ğŸŒˆ AI Color Assistant ("make it sunset-like"), ğŸ–Œï¸ Smart Brush System with auto-fill, â®ï¸ Version History with rollback, and 14 specialized brushes including 0.1px fine-liner for eyelashes!',isNew:!0},{q:"ğŸ¨ How does the AI Color Assistant work?",a:'Instead of picking exact colors, describe the mood! Try "sunset vibes", "ocean depths", or "magical forest". Upload reference images for instant color extraction, or let AI analyze your artwork for harmonious palettes!',isNew:!0},{q:"ğŸ“š What is the Character Library?",a:"Save and organize your anime characters with auto-generated thumbnails! Drag-and-drop to organize by series or mood, quick-load previous designs, and build your entire anime universe in one place.",isNew:!0},{q:"ğŸ–Œï¸ What are the new specialized brushes?",a:"14 amazing tools! Fine-liner (0.1px for eyelashes), Texture brush (hair/fabric), Detail brushes, Calligraphy pen, Pixel brush, and more! Each has pressure sensitivity, tapering, and quick presets for common details.",isNew:!0},{q:"â®ï¸ How does Version History work?",a:'Auto-saves at key milestones with AI labels like "Sketch Complete"! Compare versions side-by-side, rollback instantly, or combine elements from different versions. Never lose progress again!',isNew:!0},{q:"How do I create my first anime character?",a:"Start with the AI Generate Panel to create a base character, or use the Template Library for pre-made designs. Then customize using the various drawing tools and layers."},{q:"What can Anime Character Helper do?",a:"Create detailed anime characters with AI assistance, pose libraries, template collections, reference search, and professional drawing tools."},{q:"How does AI character generation work?",a:"Describe your character's appearance, personality, and style. Our AI will generate detailed artwork that you can further customize and refine."},{q:"Can I use reference images?",a:"Yes! Use the Reference Search to find inspiration images, or upload your own references to guide your character creation."},{q:"How do I use the pose library?",a:"Browse through our extensive pose collection and apply poses to your character. You can also modify and customize poses to fit your needs."},{q:"What export options are available?",a:"Export your characters in various formats including PNG, JPG, and PSD with layers intact for further editing in external software."}],models:[{q:"ğŸ†• How do models work with v1.2 features?",a:"All v1.2 features work with every model! Creative Control Levels, personality guidance, and smart suggestions adapt to your chosen model. Premium models provide even more nuanced creative collaboration!",isNew:!0},{q:"What AI models do you offer?",a:"We offer Qwen-Turbo (free), Gemini Flash (free), GPT-4 (paid), Claude-3 (paid), and Gemini Pro (paid). Each model has different strengths for various tasks."},{q:"Which model should I choose?",a:"Qwen-Turbo/Gemini Flash: Great for general tasks and beginners. GPT-4: Best for complex reasoning and creative writing. Claude-3: Excellent for analysis and research tasks. Gemini Pro: Advanced reasoning with multimodal capabilities."},{q:"How do credits work?",a:"Qwen-Turbo is free with daily limits. Premium models (GPT-4, Claude-3) use credits. You can purchase credits or subscribe for unlimited access."},{q:"Can I switch models anytime?",a:"Yes! You can change models in settings or during conversations based on your needs and available credits."}]},ce={"qwen-turbo":{name:"Qwen-Turbo",type:"free",description:"Fast and efficient for everyday tasks",strengths:["Quick responses","General knowledge","Code assistance"],recommended:["Beginners","Daily tasks","Learning"]},"gemini-flash":{name:"Gemini Flash",type:"free",description:"Fast and cost-effective Gemini model",strengths:["Quick responses","Good reasoning","Multimodal support"],recommended:["Quick tasks","Learning","General use"]},"gpt-4":{name:"GPT-4",type:"paid",description:"Advanced reasoning and creativity",strengths:["Complex analysis","Creative writing","Problem solving"],recommended:["Professional writing","Research","Complex projects"]},"claude-3":{name:"Claude-3",type:"paid",description:"Excellent for analysis and research",strengths:["Academic writing","Data analysis","Detailed explanations"],recommended:["Academic work","Research papers","Technical writing"]},"gemini-pro":{name:"Gemini Pro",type:"paid",description:"Advanced Gemini model with superior reasoning",strengths:["Advanced reasoning","Multimodal capabilities","Creative tasks"],recommended:["Complex projects","Creative work","Advanced analysis"]},"gemini-1.5-flash":{name:"Gemini 1.5 Flash",type:"free",description:"Fast and efficient Gemini model",strengths:["Quick responses","Good reasoning","Multimodal support"],recommended:["Quick tasks","Learning","General use"]},"gemini-pro-vision":{name:"Gemini Pro Vision",type:"paid",description:"Gemini model with vision capabilities",strengths:["Image understanding","Multimodal tasks"],recommended:["Image tasks","Creative work"]}};function as({isOpen:t=!0,onClose:e,mode:n="main",floatingMode:r=!1}){const s=St(),[o,i]=S.useState("chat"),[a,u]=S.useState(n),[d,h]=S.useState("qwen-turbo"),[f,w]=S.useState("teacher"),[E,m]=S.useState(r),{messages:y,sendMessage:g,isLoading:N}=ts(),{provider:b,model:T}=yn(),A=at[f],x=C=>{const O=`You are ${A.name}. ${A.description}. ${A.traits.join(", ")}.`,_=n!=="main"?`The user is currently in ${n} mode.`:"";let R="qwen";d.startsWith("gpt-")?R="openai":d.startsWith("claude-")?R="anthropic":d.startsWith("gemini-")&&(R="gemini"),g(C,{context:{provider:R,model:d,personality:O,mode:_}})},D=()=>{switch(n){case"writing-helper":return["ğŸ†• What's new in Writing Helper v1.2?","âœ¨ How do I use Generate Versions?","ğŸ¨ What are Creative Control Levels?","How do I use AI writing continuation?"];case"report-helper":return["ğŸ†• What's new in Report Helper v1.2?","ğŸ“ How do Academic Enhancements work?","How do I start a scientific report?","Can you help me create charts?"];case"anime-chara-helper":return["ğŸ†• What's amazing in v1.2 Character Creation?","ğŸ¨ How does the AI Color Assistant work?","ğŸ“š What is the Character Library?","ğŸ–Œï¸ What are the new specialized brushes?"];default:return["ğŸ†• What's new in Yumi-Series v1.2?","ğŸ¨ What are Creative Control Levels?","ğŸ‘¤ How do Yumi personalities help me?","Which mode should I use for my project?"]}},F=()=>p("div",{className:"floating-ai-icon",onClick:()=>m(!1),children:[c("img",{src:"/references/yumi-6.png",alt:A.name,className:"yumi-avatar"}),c("div",{className:"floating-tooltip",children:p("span",{children:["Chat with ",A.name]})})]}),$=()=>{var C,O,_;return p("div",{className:"chat-container",children:[p("div",{className:"chat-header",children:[p("div",{className:"chat-header-main",children:[p("h4",{children:["Chat with ",A.name]}),p("p",{children:["Current Model: ",p("span",{className:`model-badge ${(C=ce[d])==null?void 0:C.type}`,children:[(O=ce[d])==null?void 0:O.name," (",((_=ce[d])==null?void 0:_.type)==="free"?"Free":"Paid",")"]})]})]}),p("div",{className:"personality-display",children:[c("img",{src:"/references/yumi-6.png",alt:A.name,className:"yumi-avatar-large"}),p("div",{className:"personality-info",children:[c("span",{className:"personality-name",children:A.name}),c("span",{className:"personality-desc",children:A.description})]})]})]}),p("div",{className:"chat-window",children:[y.length===0&&p("div",{className:"chat-welcome",children:[c("img",{src:"/references/yumi-6.png",alt:A.name,className:"yumi-avatar-welcome"}),p("h4",{children:["Hello! I'm ",A.name]}),c("p",{children:A.description}),c("p",{className:"personality-traits",children:A.traits.join(" â€¢ ")}),p("div",{className:"v12-hint",children:[c("span",{className:"hint-label",children:"ğŸ’« v1.2 Secret:"}),c("span",{className:"hint-text",children:A.v12Hint})]}),c("div",{className:"quick-questions",children:D().map((R,B)=>c("button",{onClick:()=>x(R),children:R},B))})]}),y.map((R,B)=>c("div",{className:`chat-message ${R.role}`,children:c("div",{className:"message-content",children:R.content})},B)),N&&c("div",{className:"chat-message assistant",children:p("div",{className:"typing-indicator",children:[c("span",{}),c("span",{}),c("span",{})]})})]}),p("div",{className:"chat-input",children:[c("input",{type:"text",placeholder:`Ask ${A.name} anything...`,onKeyPress:R=>{if(R.key==="Enter"){const B=R.currentTarget;B.value.trim()&&(x(B.value),B.value="")}}}),c("button",{onClick:()=>{const R=document.querySelector(".chat-input input");R.value.trim()&&(x(R.value),R.value="")},children:"Send"})]})]})},ae=()=>p("div",{className:"personality-container",children:[p("div",{className:"personality-header",children:[c("h4",{children:"Choose Yumi's Personality"}),c("p",{children:"Select how you'd like Yumi to interact with you"})]}),c("div",{className:"personality-grid",children:Object.entries(at).map(([C,O])=>p("div",{className:`personality-card ${f===C?"selected":""}`,onClick:()=>w(C),children:[c("div",{className:"personality-emoji-card",children:O.emoji}),c("h5",{children:O.name}),c("p",{children:O.description}),c("div",{className:"personality-traits-preview",children:O.traits.slice(0,2).map((_,R)=>c("span",{className:"trait-tag",children:_},R))})]},C))}),p("div",{className:"personality-preview",children:[p("h5",{children:["Selected: ",A.name]}),c("p",{children:A.description}),c("div",{className:"traits-full",children:A.traits.map((C,O)=>c("span",{className:"trait-full",children:C},O))})]})]}),tn=()=>{var C;return p("div",{className:"faq-container",children:[p("div",{className:"faq-categories",children:[c("button",{className:a==="writing-helper"?"active":"",onClick:()=>u("writing-helper"),children:"âœï¸ Writing Helper"}),c("button",{className:a==="report-helper"?"active":"",onClick:()=>u("report-helper"),children:"ğŸ“Š Report Helper"}),c("button",{className:a==="anime-chara-helper"?"active":"",onClick:()=>u("anime-chara-helper"),children:"ğŸ¨ Anime Character"}),c("button",{className:a==="models"?"active":"",onClick:()=>u("models"),children:"ğŸ¤– AI Models"})]}),c("div",{className:"faq-content",children:(C=is[a])==null?void 0:C.map((O,_)=>p("div",{className:`faq-item ${O.isNew?"new-feature":""}`,children:[p("div",{className:"faq-question",children:[O.q,O.isNew&&c("span",{className:"new-badge",children:"NEW!"})]}),c("div",{className:"faq-answer",children:O.a})]},_))})]})},nn=()=>p("div",{className:"models-container",children:[p("div",{className:"models-header",children:[c("h4",{children:"Available AI Models"}),c("p",{children:"Choose the best model for your needs"})]}),c("div",{className:"models-list",children:Object.entries(ce).map(([C,O])=>p("div",{className:`model-card ${O.type} ${d===C?"selected":""}`,children:[p("div",{className:"model-header",children:[c("h5",{children:O.name}),c("span",{className:`model-type ${O.type}`,children:O.type==="free"?"ğŸ†“ Free":"ğŸ’ Premium"})]}),c("p",{className:"model-description",children:O.description}),p("div",{className:"model-strengths",children:[c("h6",{children:"Strengths:"}),c("ul",{children:O.strengths.map((_,R)=>c("li",{children:_},R))})]}),p("div",{className:"model-recommended",children:[c("h6",{children:"Best for:"}),c("div",{className:"recommended-tags",children:O.recommended.map((_,R)=>c("span",{className:"rec-tag",children:_},R))})]}),c("button",{className:`select-model-btn ${d===C?"selected":""}`,onClick:()=>h(C),disabled:d===C,children:d===C?"Current Model":"Select Model"})]},C))}),p("div",{className:"model-recommendation",children:[c("div",{className:"rec-icon",children:"ğŸ’¡"}),p("div",{className:"rec-content",children:[c("h5",{children:"Recommendation"}),p("p",{children:["Start with ",c("strong",{children:"Qwen-Turbo"})," for free usage. Upgrade to premium models for advanced features and higher quality outputs."]})]})]})]}),rn=()=>{const C=[{id:"chat",label:"Core"},{id:"faq",label:"Tutorial"},{id:"models",label:"Models"},{id:"personality",label:"Personality"}];return f==="teacher"&&C.push({id:"japanese",label:"æ—¥æœ¬èªãƒ¬ãƒƒã‚¹ãƒ³"}),f==="otaku"&&C.push({id:"anime",label:"Anime-ãƒˆãƒªãƒ“ã‚¢"}),C},sn=()=>{switch(o){case"chat":return $();case"faq":return tn();case"models":return nn();case"personality":return ae();case"japanese":return c(ns,{});case"anime":return c(os,{});default:return $()}},on=()=>{s("/")};return t?E?F():c("div",{className:"ai-assistant-overlay",children:p("div",{className:"ai-assistant",children:[p("div",{className:"ai-header",children:[p("div",{className:"header-content",children:[p("h3",{children:[A.emoji," ",A.name]}),c("p",{children:"Your helpful AI assistant"})]}),p("div",{className:"header-controls",children:[r&&c("button",{className:"minimize-btn",onClick:()=>m(!0),title:"Minimize",children:"â–"}),c("button",{className:"back-btn",onClick:on,title:"Go Back",children:"â¬…ï¸"}),e&&c("button",{className:"close-btn",onClick:e,children:"Ã—"})]})]}),c("div",{className:"ai-tabs",children:rn().map(C=>c("button",{className:`tab-button ${o===C.id?"active":""}`,onClick:()=>i(C.id),children:C.label},C.id))}),c("div",{className:"ai-content",children:sn()})]})}):null}const cs=({isOpen:t,onClose:e,onSuccess:n})=>{const[r,s]=S.useState(!0),[o,i]=S.useState({email:"",username:"",password:"",confirmPassword:""}),[a,u]=S.useState(!1),[d,h]=S.useState(""),f=y=>{i({...o,[y.target.name]:y.target.value}),h("")},w=async y=>{y.preventDefault(),u(!0),h("");try{if(r){const g=await ot.login(o.email,o.password);g.success?m():h(g.error||"Login failed")}else{if(o.password!==o.confirmPassword){h("Passwords do not match");return}const g=await ot.signup(o.email,o.username,o.password);g.success?m():h(g.error||"Signup failed")}}catch{h("An unexpected error occurred")}finally{u(!1)}},E=()=>{s(!r),h(""),i({email:"",username:"",password:"",confirmPassword:""})},m=async()=>{const y={stripeCustomerId:"mock_customer_id",credits:100,subscription:{status:"active",plan:"free",nextBillingDate:new Date().toISOString()}};n(y)};return t?c("div",{className:"auth-modal-overlay",onClick:e,children:p("div",{className:"auth-modal",onClick:y=>y.stopPropagation(),children:[p("div",{className:"auth-modal-header",children:[c("h2",{children:r?"Sign In":"Sign Up"}),c("button",{className:"auth-modal-close",onClick:e,children:"Ã—"})]}),p("form",{className:"auth-form",onSubmit:w,children:[p("div",{className:"form-group",children:[c("label",{htmlFor:"email",children:"Email"}),c("input",{type:"email",id:"email",name:"email",value:o.email,onChange:f,required:!0,placeholder:"Enter your email"})]}),!r&&p("div",{className:"form-group",children:[c("label",{htmlFor:"username",children:"Username"}),c("input",{type:"text",id:"username",name:"username",value:o.username,onChange:f,required:!0,placeholder:"Choose a username"})]}),p("div",{className:"form-group",children:[c("label",{htmlFor:"password",children:"Password"}),c("input",{type:"password",id:"password",name:"password",value:o.password,onChange:f,required:!0,placeholder:"Enter your password",minLength:6})]}),!r&&p("div",{className:"form-group",children:[c("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),c("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:o.confirmPassword,onChange:f,required:!0,placeholder:"Confirm your password",minLength:6})]}),d&&c("div",{className:"auth-error",children:d}),c("button",{type:"submit",className:"auth-submit-btn",disabled:a,children:a?"Processing...":r?"Sign In":"Sign Up"})]}),c("div",{className:"auth-toggle",children:p("p",{children:[r?"Don't have an account? ":"Already have an account? ",c("button",{type:"button",className:"auth-toggle-btn",onClick:E,children:r?"Sign Up":"Sign In"})]})})]})}):null};function De(t){"@babel/helpers - typeof";return De=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(t)}function Gt(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":De(XMLHttpRequest))==="object"}function ls(t){return!!t&&typeof t.then=="function"}function us(t){return ls(t)?t:Promise.resolve(t)}function ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ct(Object(n),!0).forEach(function(r){ds(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ds(t,e,n){return(e=hs(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hs(t){var e=fs(t,"string");return V(e)=="symbol"?e:e+""}function fs(t,e){if(V(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(V(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function V(t){"@babel/helpers - typeof";return V=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(t)}var H=typeof fetch=="function"?fetch:void 0;typeof global<"u"&&global.fetch?H=global.fetch:typeof window<"u"&&window.fetch&&(H=window.fetch);var se;Gt()&&(typeof global<"u"&&global.XMLHttpRequest?se=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(se=window.XMLHttpRequest));var pe;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?pe=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(pe=window.ActiveXObject));typeof H!="function"&&(H=void 0);if(!H&&!se&&!pe)try{U(()=>import("./browser-ponyfill-CXDcwSTK.js").then(t=>t.b),__vite__mapDeps([0,1])).then(function(t){H=t.default}).catch(function(){})}catch{}var je=function(e,n){if(n&&V(n)==="object"){var r="";for(var s in n)r+="&"+encodeURIComponent(s)+"="+encodeURIComponent(n[s]);if(!r)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+r.slice(1)}return e},ut=function(e,n,r,s){var o=function(u){if(!u.ok)return r(u.statusText||"Error",{status:u.status});u.text().then(function(d){r(null,{status:u.status,data:d})}).catch(r)};if(s){var i=s(e,n);if(i instanceof Promise){i.then(o).catch(r);return}}typeof fetch=="function"?fetch(e,n).then(o).catch(r):H(e,n).then(o).catch(r)},dt=!1,ps=function(e,n,r,s){e.queryStringParams&&(n=je(n,e.queryStringParams));var o=lt({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(o["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),r&&(o["Content-Type"]="application/json");var i=typeof e.requestOptions=="function"?e.requestOptions(r):e.requestOptions,a=lt({method:r?"POST":"GET",body:r?e.stringify(r):void 0,headers:o},dt?{}:i),u=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{ut(n,a,s,u)}catch(d){if(!i||Object.keys(i).length===0||!d.message||d.message.indexOf("not implemented")<0)return s(d);try{Object.keys(i).forEach(function(h){delete a[h]}),ut(n,a,s,u),dt=!0}catch(h){s(h)}}},ms=function(e,n,r,s){r&&V(r)==="object"&&(r=je("",r).slice(1)),e.queryStringParams&&(n=je(n,e.queryStringParams));try{var o=se?new se:new pe("MSXML2.XMLHTTP.3.0");o.open(r?"POST":"GET",n,1),e.crossDomain||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.withCredentials=!!e.withCredentials,r&&o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.overrideMimeType&&o.overrideMimeType("application/json");var i=e.customHeaders;if(i=typeof i=="function"?i():i,i)for(var a in i)o.setRequestHeader(a,i[a]);o.onreadystatechange=function(){o.readyState>3&&s(o.status>=400?o.statusText:null,{status:o.status,data:o.responseText})},o.send(r)}catch(u){console&&console.log(u)}},gs=function(e,n,r,s){if(typeof r=="function"&&(s=r,r=void 0),s=s||function(){},H&&n.indexOf("file:")!==0)return ps(e,n,r,s);if(Gt()||typeof ActiveXObject=="function")return ms(e,n,r,s);s(new Error("No fetch and no xhr implementation found!"))};function Q(t){"@babel/helpers - typeof";return Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(t)}function ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Te(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ht(Object(n),!0).forEach(function(r){Vt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ys(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ws(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Jt(r.key),r)}}function bs(t,e,n){return e&&ws(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vt(t,e,n){return(e=Jt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jt(t){var e=vs(t,"string");return Q(e)=="symbol"?e:e+""}function vs(t,e){if(Q(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Q(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ss=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(n){return JSON.parse(n)},stringify:JSON.stringify,parsePayload:function(n,r,s){return Vt({},r,s||"")},parseLoadPayload:function(n,r){},request:gs,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},Xt=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ys(this,t),this.services=e,this.options=n,this.allOptions=r,this.type="backend",this.init(e,n,r)}return bs(t,[{key:"init",value:function(n){var r=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=n,this.options=Te(Te(Te({},Ss()),this.options||{}),s),this.allOptions=o,this.services&&this.options.reloadInterval){var i=setInterval(function(){return r.reload()},this.options.reloadInterval);Q(i)==="object"&&typeof i.unref=="function"&&i.unref()}}},{key:"readMulti",value:function(n,r,s){this._readAny(n,n,r,r,s)}},{key:"read",value:function(n,r,s){this._readAny([n],n,[r],r,s)}},{key:"_readAny",value:function(n,r,s,o,i){var a=this,u=this.options.loadPath;typeof this.options.loadPath=="function"&&(u=this.options.loadPath(n,s)),u=us(u),u.then(function(d){if(!d)return i(null,{});var h=a.services.interpolator.interpolate(d,{lng:n.join("+"),ns:s.join("+")});a.loadUrl(h,i,r,o)})}},{key:"loadUrl",value:function(n,r,s,o){var i=this,a=typeof s=="string"?[s]:s,u=typeof o=="string"?[o]:o,d=this.options.parseLoadPayload(a,u);this.options.request(this.options,n,d,function(h,f){if(f&&(f.status>=500&&f.status<600||!f.status))return r("failed loading "+n+"; status code: "+f.status,!0);if(f&&f.status>=400&&f.status<500)return r("failed loading "+n+"; status code: "+f.status,!1);if(!f&&h&&h.message){var w=h.message.toLowerCase(),E=["failed","fetch","network","load"].find(function(g){return w.indexOf(g)>-1});if(E)return r("failed loading "+n+": "+h.message,!0)}if(h)return r(h,!1);var m,y;try{typeof f.data=="string"?m=i.options.parse(f.data,s,o):m=f.data}catch{y="failed parsing "+n+" to json"}if(y)return r(y,!1);r(null,m)})}},{key:"create",value:function(n,r,s,o,i){var a=this;if(this.options.addPath){typeof n=="string"&&(n=[n]);var u=this.options.parsePayload(r,s,o),d=0,h=[],f=[];n.forEach(function(w){var E=a.options.addPath;typeof a.options.addPath=="function"&&(E=a.options.addPath(w,r));var m=a.services.interpolator.interpolate(E,{lng:w,ns:r});a.options.request(a.options,m,u,function(y,g){d+=1,h.push(y),f.push(g),d===n.length&&typeof i=="function"&&i(h,f)})})}}},{key:"reload",value:function(){var n=this,r=this.services,s=r.backendConnector,o=r.languageUtils,i=r.logger,a=s.language;if(!(a&&a.toLowerCase()==="cimode")){var u=[],d=function(f){var w=o.toResolveHierarchy(f);w.forEach(function(E){u.indexOf(E)<0&&u.push(E)})};d(a),this.allOptions.preload&&this.allOptions.preload.forEach(function(h){return d(h)}),u.forEach(function(h){n.allOptions.ns.forEach(function(f){s.read(h,f,"read",null,null,function(w,E){w&&i.warn("loading namespace ".concat(f," for language ").concat(h," failed"),w),!w&&E&&i.log("loaded namespace ".concat(f," for language ").concat(h),E),s.loaded("".concat(h,"|").concat(f),w,E)})})})}}}])}();Xt.type="backend";const{slice:Es,forEach:As}=[];function Cs(t){return As.call(Es.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}function Ns(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(t))}const ft=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Os=function(t,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},s=encodeURIComponent(e);let o=`${t}=${s}`;if(r.maxAge>0){const i=r.maxAge-0;if(Number.isNaN(i))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(i)}`}if(r.domain){if(!ft.test(r.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${r.domain}`}if(r.path){if(!ft.test(r.path))throw new TypeError("option path is invalid");o+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(o+="; Partitioned"),o},pt={create(t,e,n,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+n*60*1e3)),r&&(s.domain=r),document.cookie=Os(t,e,s)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let s=n[r];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(e)===0)return s.substring(e.length,s.length)}return null},remove(t,e){this.create(t,"",-1,e)}};var Ts={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return pt.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:r,cookieDomain:s,cookieOptions:o}=e;n&&typeof document<"u"&&pt.create(n,t,r,s,o)}},Rs={name:"querystring",lookup(t){var r;let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const i=s.substring(1).split("&");for(let a=0;a<i.length;a++){const u=i[a].indexOf("=");u>0&&i[a].substring(0,u)===e&&(n=i[a].substring(u+1))}}return n}},ks={name:"hash",lookup(t){var s;let{lookupHash:e,lookupFromHashIndex:n}=t,r;if(typeof window<"u"){const{hash:o}=window.location;if(o&&o.length>2){const i=o.substring(1);if(e){const a=i.split("&");for(let u=0;u<a.length;u++){const d=a[u].indexOf("=");d>0&&a[u].substring(0,d)===e&&(r=a[u].substring(d+1))}}if(r)return r;if(!r&&n>-1){const a=o.match(/\/([a-zA-Z-]*)/g);return Array.isArray(a)?(s=a[typeof n=="number"?n:0])==null?void 0:s.replace("/",""):void 0}}}return r}};let J=null;const mt=()=>{if(J!==null)return J;try{if(J=typeof window<"u"&&window.localStorage!==null,!J)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{J=!1}return J};var xs={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&mt())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&mt()&&window.localStorage.setItem(n,t)}};let X=null;const gt=()=>{if(X!==null)return X;try{if(X=typeof window<"u"&&window.sessionStorage!==null,!X)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{X=!1}return X};var Ps={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&gt())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&gt()&&window.sessionStorage.setItem(n,t)}},Is={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:s}=navigator;if(n)for(let o=0;o<n.length;o++)e.push(n[o]);r&&e.push(r),s&&e.push(s)}return e.length>0?e:void 0}},Ls={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},_s={name:"path",lookup(t){var s;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(s=n[typeof e=="number"?e:0])==null?void 0:s.replace("/",""):void 0}},qs={name:"subdomain",lookup(t){var s,o;let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,r=typeof window<"u"&&((o=(s=window.location)==null?void 0:s.hostname)==null?void 0:o.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};let Yt=!1;try{document.cookie,Yt=!0}catch{}const Qt=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Yt||Qt.splice(1,1);const Ms=()=>({order:Qt,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class Zt{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=Cs(n,this.options||{},Ms()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=s=>s.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(Ts),this.addDetector(Rs),this.addDetector(xs),this.addDetector(Ps),this.addDetector(Is),this.addDetector(Ls),this.addDetector(_s),this.addDetector(qs),this.addDetector(ks)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return e.forEach(r=>{if(this.detectors[r]){let s=this.detectors[r].lookup(this.options);s&&typeof s=="string"&&(s=[s]),s&&(n=n.concat(s))}}),n=n.filter(r=>r!=null&&!Ns(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}Zt.type="languageDetector";Re.use(Xt).use(Zt).use(ln).init({fallbackLng:"en",ns:["main","writing","report","helper","anime","image","billing","download","common"],defaultNS:"main",backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"},detection:{order:["querystring","cookie","localStorage","navigator"],caches:["cookie","localStorage"],cookieMinutes:60*24*30,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng"},interpolation:{escapeValue:!1},react:{useSuspense:!0}});const en=S.createContext(void 0),yo=()=>{const t=S.useContext(en);if(!t)throw new Error("useLanguage must be used within a LanguageProvider");return t},Ds=({children:t})=>{const[e,n]=S.useState(()=>localStorage.getItem("language")||"en"),r=s=>{n(s),localStorage.setItem("language",s),Re.changeLanguage(s)};return S.useEffect(()=>{const s=localStorage.getItem("language");s&&Re.changeLanguage(s)},[]),c(en.Provider,{value:{language:e,setLanguage:r},children:t})};class js{constructor(){this.STORAGE_KEY="yumi-installed-modes",this.USAGE_STATS_KEY="yumi-usage-stats",this.CACHE_PREFIX="yumi-mode-",this.modeConfigs={"writing-helper":{id:"writing-helper",name:"Writing Helper",version:"1.0.0",size:18e5,dependencies:["react-markdown","emoji-mart"],cacheKeys:["writing-templates","character-styles","genre-templates"],assets:["writing-templates.json","character-personas.json","genre-styles.json"]},"anime-chara-helper":{id:"anime-chara-helper",name:"Anime Character Designer",version:"1.0.0",size:32e5,dependencies:["fabric","color-picker"],cacheKeys:["anime-assets","character-presets"],assets:["anime-parts.json","character-templates.json","anime-backgrounds.png"]}},this.coreModes=["writing-helper","anime-chara-helper"]}async getInstalledModes(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(e)return JSON.parse(e);const n=this.coreModes;return await this.setInstalledModes(n),n}catch(e){return console.error("Error getting installed modes:",e),this.coreModes}}async setInstalledModes(e){const n=[...new Set([...this.coreModes,...e])];localStorage.setItem(this.STORAGE_KEY,JSON.stringify(n))}async isModeInstalled(e){return(await this.getInstalledModes()).includes(e)}async installMode(e,n){const r=this.modeConfigs[e];if(!r)throw new Error(`Mode ${e} not found`);const s=await this.getInstalledModes();if(s.includes(e))throw new Error(`Mode ${e} is already installed`);try{n==null||n({progress:10,status:"downloading",message:"Downloading dependencies..."}),await this.downloadDependencies(r.dependencies),n==null||n({progress:50,status:"installing",message:"Caching assets..."}),await this.cacheAssets(e,r.assets),n==null||n({progress:80,status:"installing",message:"Initializing cache..."}),await this.initializeModeCache(e,r.cacheKeys),n==null||n({progress:100,status:"complete",message:"Installation complete!"});const o=[...s,e];await this.setInstalledModes(o),await this.initializeUsageStats(e)}catch(o){const i=o instanceof Error?o.message:"Unknown error occurred";throw n==null||n({progress:0,status:"error",message:`Installation failed: ${i}`}),o}}async uninstallMode(e){if(this.coreModes.includes(e))throw new Error(`Cannot uninstall core mode: ${e}`);const n=await this.getInstalledModes();if(!n.includes(e))throw new Error(`Mode ${e} is not installed`);const r=this.modeConfigs[e];if(!r)throw new Error(`Mode ${e} not found`);try{await this.clearModeCache(e,r.cacheKeys),await this.clearCachedAssets(e);const s=n.filter(o=>o!==e);await this.setInstalledModes(s),await this.clearServiceWorkerCache(e)}catch(s){throw console.error(`Error uninstalling mode ${e}:`,s),s}}async getUsageStats(){try{const e=localStorage.getItem(this.USAGE_STATS_KEY);return e?JSON.parse(e):{}}catch(e){return console.error("Error getting usage stats:",e),{}}}async logModeUsage(e,n=0){try{const r=await this.getUsageStats(),s=r[e]||{count:0,lastUsed:new Date,totalTime:0};r[e]={count:s.count+1,lastUsed:new Date,totalTime:s.totalTime+n},localStorage.setItem(this.USAGE_STATS_KEY,JSON.stringify(r))}catch(r){console.error("Error logging mode usage:",r)}}async getStorageUsage(){const e=await this.getInstalledModes(),n={};for(const r of e){const s=this.modeConfigs[r];s&&(n[r]=s.size)}return n}async clearAllData(){try{[this.STORAGE_KEY,this.USAGE_STATS_KEY].forEach(n=>localStorage.removeItem(n)),await this.clearIndexedDB(),await this.clearAllServiceWorkerCache(),await this.setInstalledModes(this.coreModes)}catch(e){throw console.error("Error clearing all data:",e),e}}async downloadDependencies(e){await this.simulateAsyncOperation(1e3)}async cacheAssets(e,n){for(const r of n){const s=`${this.CACHE_PREFIX}${e}-${r}`;localStorage.setItem(s,JSON.stringify({cached:Date.now(),asset:r}))}}async clearCachedAssets(e){Object.keys(localStorage).filter(s=>s.startsWith(`${this.CACHE_PREFIX}${e}`)).forEach(s=>localStorage.removeItem(s))}async initializeModeCache(e,n){for(const r of n){const s=`${e}-${r}`;localStorage.getItem(s)||localStorage.setItem(s,JSON.stringify({initialized:Date.now()}))}}async clearModeCache(e,n){for(const r of n){const s=`${e}-${r}`;localStorage.removeItem(s)}}async initializeUsageStats(e){const n=await this.getUsageStats();n[e]||(n[e]={count:0,lastUsed:new Date,totalTime:0},localStorage.setItem(this.USAGE_STATS_KEY,JSON.stringify(n)))}async clearServiceWorkerCache(e){if("serviceWorker"in navigator&&"caches"in window)try{const r=(await caches.keys()).filter(s=>s.includes(e));await Promise.all(r.map(s=>caches.delete(s)))}catch(n){console.error("Error clearing service worker cache:",n)}}async clearAllServiceWorkerCache(){if("serviceWorker"in navigator&&"caches"in window)try{const e=await caches.keys();await Promise.all(e.map(n=>caches.delete(n)))}catch(e){console.error("Error clearing all service worker cache:",e)}}async clearIndexedDB(){if("indexedDB"in window)try{const e=["yumi-series-cache","yumi-assets","yumi-data"];for(const n of e){const r=indexedDB.deleteDatabase(n);await new Promise((s,o)=>{r.onsuccess=()=>s(void 0),r.onerror=()=>o(r.error)})}}catch(e){console.error("Error clearing IndexedDB:",e)}}async simulateAsyncOperation(e){return new Promise(n=>setTimeout(n,e))}}const Us=new js,Y={"writing-helper":()=>U(()=>import("./WritingHelperScreen-BqjqOLFN.js"),__vite__mapDeps([2,1,3,4])),"anime-chara-helper":()=>U(()=>import("./AnimeCharaHelperApp-CENhVs9p.js").then(t=>t.a),__vite__mapDeps([5,1,3,4,6,7])),manga:()=>U(()=>import("./MangaApp-D7uF3Onr.js"),__vite__mapDeps([8,1,9])),"charge-page":()=>U(()=>import("./ChargePage-y4D_oWtW.js"),__vite__mapDeps([10,1,11,6,12]))},Ue=t=>{try{const e=Y[t];return e?S.lazy(()=>e().catch(n=>(console.error(`Failed to load ${t}:`,n),{default:()=>null}))):(console.warn(`Skipping unknown component: ${t}`),S.lazy(()=>Promise.resolve({default:()=>null})))}catch(e){return console.error(`Error in loadComponent for ${t}:`,e),S.lazy(()=>Promise.resolve({default:()=>null}))}},Fs=async()=>{try{const t="yumi-test-storage";try{localStorage.setItem(t,"test"),localStorage.removeItem(t)}catch(n){console.warn("localStorage not available:",n);return}const e=await Us.getInstalledModes().catch(n=>(console.warn("Failed to get installed modes:",n),Object.keys(Y)));for(const n of e){if(!Y[n]){console.warn(`Skipping preload of unknown component: ${n}`);continue}try{await new Promise(s=>setTimeout(s,100));const r=Ue(n);if(r){const s=r._payload._result;s&&typeof s.then=="function"&&await s.catch(o=>{console.warn(`Non-critical: Failed to preload ${n}:`,o)})}}catch(r){console.warn(`Non-critical: Failed to preload component ${n}:`,r)}}}catch(t){console.warn("Non-critical: Error in preloadInstalledComponents:",t)}},Hs={loadComponent:Ue,preloadComponent:async t=>{if(!Y[t]){console.warn(`Cannot preload unknown component: ${t}`);return}try{const e=Ue(t);if(e){const n=e._payload._result;n&&typeof n.then=="function"&&await n}}catch(e){console.error(`Failed to preload component ${t}:`,e)}},preloadInstalledComponents:Fs,clearComponentCache:t=>{console.warn("clearComponentCache not implemented")},clearAllCache:()=>{console.warn("clearAllCache not implemented")},getCacheSize:()=>Object.keys(Y).length,getCachedComponent:t=>{if(!Y[t])return null;try{return require(`../${t}`)}catch{return null}}};function $s(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(t=>{t.unregister().then(()=>{"caches"in window&&caches.keys().then(e=>{e.forEach(n=>{caches.delete(n)})})})}).catch(t=>{console.error("Error unregistering service worker:",t)})}const Bs=S.lazy(()=>U(()=>import("./MainPage-D5iy2Gzd.js"),__vite__mapDeps([13,1,3,4,5,6,7,11,2,14]))),zs=S.lazy(()=>U(()=>import("./ChargePage-y4D_oWtW.js"),__vite__mapDeps([10,1,11,6,12]))),Ws=S.lazy(()=>U(()=>import("./AnimeCharaHelperApp-CENhVs9p.js").then(t=>t.a),__vite__mapDeps([5,1,3,4,6,7]))),Ks=S.lazy(()=>U(()=>import("./MangaApp-D7uF3Onr.js"),__vite__mapDeps([8,1,9]))),yt=S.lazy(()=>U(()=>import("./WritingHelperScreen-BqjqOLFN.js"),__vite__mapDeps([2,1,3,4]))),Gs=()=>{const[t,e]=S.useState(!1),[n,r]=S.useState(""),[s,o]=S.useState(!1),i=St();S.useEffect(()=>{$s(),(async()=>{try{await Hs.preloadInstalledComponents()}catch(h){console.warn("dynamicLoader.preload failed:",h)}})()},[]);const a=()=>{window.history.length>1?i(-1):i("/")},u=()=>{o(!1)};return p("div",{className:"App",children:[c(S.Suspense,{fallback:c(fn,{}),children:p(dn,{children:[c(z,{path:"/",element:c(Bs,{})}),c(z,{path:"/writing/*",element:c(yt,{content:n,onContentChange:r,onBack:a})}),c(z,{path:"/writing-helper/*",element:c(yt,{content:n,onContentChange:r,onBack:a})}),c(z,{path:"/anime-chara/*",element:c(Ws,{onBack:a})}),c(z,{path:"/manga/*",element:c(Ks,{})}),c(z,{path:"/charge",element:c(zs,{})}),c(z,{path:"*",element:c(hn,{to:"/",replace:!0})})]})}),c(as,{}),c(cs,{isOpen:s,onClose:()=>o(!1),onSuccess:u})]})},Vs=()=>c(Ds,{children:c(un,{children:c(Gs,{})})});class Js extends S.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n)}render(){var e;return this.state.hasError?c("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 flex items-center justify-center p-4",children:p("div",{className:"bg-white rounded-xl shadow-xl p-8 max-w-md w-full text-center",children:[c("div",{className:"text-6xl mb-4",children:"ğŸ˜µ"}),c("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Oops! Something went wrong"}),c("p",{className:"text-gray-600 mb-6",children:"The app encountered an error. Don't worry, let's get you back on track!"}),c("button",{onClick:()=>{this.setState({hasError:!1,error:void 0}),window.location.reload()},className:"w-full px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:"ğŸ”„ Reload App"}),c("div",{className:"mt-4 text-xs text-gray-500",children:((e=this.state.error)==null?void 0:e.message)&&p("details",{className:"mt-2",children:[c("summary",{className:"cursor-pointer text-purple-600",children:"Technical Details"}),c("pre",{className:"mt-2 text-left bg-gray-100 p-2 rounded text-xs overflow-auto",children:this.state.error.message})]})})]})}):this.props.children}}ke.createRoot(document.getElementById("root")).render(c(pn.StrictMode,{children:c(Js,{children:c(Vs,{})})}));export{cs as A,Ys as F,c as a,as as b,k as c,Me as d,yn as e,p as j,yo as u};
//# sourceMappingURL=index-C42zyR5t.js.map
