import{j as n,a as e,b as re}from"./index-C42zyR5t.js";import{b as l}from"./vendor-IypXtaUq.js";import{L as se,M as ce,N as de,O as ue,l as M,Q as T,d as ge,m as he,o as me,D as pe,S as F,T as W,r as D,R as be,P as ye}from"./ModeToggle-BaEY7_BJ.js";const Ce=({content:r,onContentChange:p,onBack:G})=>{const[d,b]=l.useState(!1),[g,y]=l.useState("left"),[c,$]=l.useState(null),[k,N]=l.useState(!1),[B,U]=l.useState({x:0,y:0}),[x,P]=l.useState(!1),[I,H]=l.useState(!1),[o,u]=l.useState({type:"solid",color:"#1a1a2e",gradient:"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)",image:"",opacity:.9}),[z,V]=l.useState([]),m=l.useRef(null),f=l.useRef(null),[s,v]=l.useState(se("writing",{level:"balanced",yumiPersonality:"teacher",allowSuggestions:!0,memoryNudges:!0,iterativeMode:!0})),[_,E]=l.useState(!1),[w,O]=l.useState([]),[L]=l.useState(ce()),[C,q]=l.useState("戦おう一緒に"),Y=t=>{if(m.current){N(!0);const i=m.current.getBoundingClientRect();U({x:t.clientX-i.left,y:t.clientY-i.top})}},j=t=>{if(k&&m.current){const i=t.clientX-B.x,a=window.innerWidth;i<a/2&&g==="right"?y("left"):i>a/2&&g==="left"&&y("right")}},K=()=>{N(!1)},R=()=>{y(t=>t==="left"?"right":"left")},A=t=>{$(c===t?null:t)},X=t=>{const i=Array.from(t.target.files||[]);if(V(a=>[...a,...i]),i[0]&&o.type==="image"){const a=new FileReader;a.onloadend=()=>{u(le=>({...le,image:a.result}))},a.readAsDataURL(i[0])}},Q=t=>{const i=s.controlSettings;v(a=>({...a,controlSettings:t})),t.yumiPersonality!==i.yumiPersonality&&v(a=>ye(a,{lastUsedPersonality:t.yumiPersonality}))},J=t=>{const i=w.find(a=>a.id===t);i&&typeof i.content=="string"&&p(i.content)},Z=t=>{if(s.controlSettings.level==="balanced"||s.controlSettings.allowSuggestions){if(T.generateBasePrompt(`${r}

Refinement request: ${t.question}`,s.controlSettings),t.type==="mood")P(!0);else if(t.type==="style"){const i=t.options[0];i&&h(i.label)}v(i=>({...i,currentContext:{feedback:t,originalContent:r}}))}},h=t=>{const i={formal:r.replace(/\b(awesome|cool|great)\b/gi,"excellent"),casual:r.replace(/\b(excellent|outstanding)\b/gi,"awesome"),emotional:r+`

This deeply resonates with the human experience.`,humorous:r+`

(Just kidding! 😄)`},a=t.toLowerCase();a in i&&p(i[a])},ee=()=>{if(s.controlSettings.iterativeMode&&r.trim()){const t=[{id:`version_${Date.now()}_main`,type:"main",content:r,metadata:{aiConfidence:.8,refinementsSuggested:["Improve clarity","Add examples","Enhance flow"],personalityInfluence:[s.controlSettings.yumiPersonality]}}];s.controlSettings.allowSuggestions&&(T.generateBasePrompt(`Rewrite this with ${s.controlSettings.yumiPersonality} personality: ${r}`,{...s.controlSettings,level:"freestyle"}),t.push({id:`version_${Date.now()}_alt`,type:"alternative",content:r+`

[AI-enhanced version would appear here]`,metadata:{aiConfidence:.7,refinementsSuggested:["Different tone","Personality variation"],personalityInfluence:[s.controlSettings.yumiPersonality]}})),O(t),E(!0)}},te=()=>{switch(o.type){case"solid":return{backgroundColor:o.color};case"gradient":return{background:o.gradient};case"image":return{backgroundImage:o.image?`url(${o.image})`:"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"};default:return{}}},S=[{id:"social",icon:"📱",label:"Post to Platforms",category:"social"},{id:"trending",icon:"📈",label:"Trending Search",category:"social"},{id:"ai-continue",icon:"🤖",label:"AI Continuation",category:"ai"},{id:"instructions",icon:"📝",label:"Instructions",category:"ai"},{id:"generate-versions",icon:"✨",label:"Generate Versions",category:"ai"},{id:"anime-collab",icon:"🎮",label:"Anime Collaboration",category:"collaboration"},{id:"galgame-blog",icon:"💖",label:"Galgame Blog",category:"collaboration"},{id:"novel-writing",icon:"📚",label:"Novel Writing",category:"collaboration"},{id:"test-writing",icon:"✅",label:"Test Writing",category:"tools"},{id:"upload",icon:"📤",label:"Upload Files",category:"tools"}],ne=t=>{switch(t){case"social":return"#ff6b9d";case"ai":return"#8b5cf6";case"collaboration":return"#10b981";case"tools":return"#f59e0b";default:return"#6b7280"}},ie=()=>{if(!c)return null;const t=S.map(i=>i.id===c?i:null).find(i=>i!==null);return t?n("div",{className:"tool-panel",children:[n("h3",{children:[t.icon," ",t.label]}),c==="upload"&&n("div",{className:"upload-panel",children:[e("input",{type:"file",ref:f,multiple:!0,accept:"image/*,text/*,.pdf,.doc,.docx",onChange:X,style:{display:"none"}}),n("button",{className:"upload-btn",onClick:()=>{var i;return(i=f.current)==null?void 0:i.click()},children:[e(M,{size:20}),"Upload Files"]}),z.length>0&&n("div",{className:"uploaded-files",children:[e("h4",{children:"Uploaded Files:"}),z.map((i,a)=>n("div",{className:"file-item",children:[e("span",{children:i.name}),n("small",{children:["(",(i.size/1024).toFixed(1)," KB)"]})]},a))]})]}),c==="social"&&n("div",{className:"social-platforms",children:[e("button",{className:"platform-btn twitter",onClick:()=>window.open("https://twitter.com/compose/tweet","_blank"),children:"🐦 Twitter"}),e("button",{className:"platform-btn instagram",onClick:()=>window.open("https://www.instagram.com/","_blank"),children:"📷 Instagram"}),e("button",{className:"platform-btn facebook",onClick:()=>window.open("https://www.facebook.com/","_blank"),children:"👥 Facebook"}),e("button",{className:"platform-btn linkedin",onClick:()=>window.open("https://www.linkedin.com/feed/","_blank"),children:"💼 LinkedIn"}),e("button",{className:"platform-btn medium",onClick:()=>window.open("https://medium.com/new-story","_blank"),children:"📖 Medium"}),e("button",{className:"platform-btn wordpress",onClick:()=>window.open("https://wordpress.com/post","_blank"),children:"📝 WordPress"}),n("div",{className:"copy-helper",children:[e("textarea",{value:r,readOnly:!0,placeholder:"Your content will appear here for easy copying",rows:4}),e("button",{onClick:()=>navigator.clipboard.writeText(r),className:"copy-btn",children:"📋 Copy Content"})]})]}),c==="trending"&&n("div",{className:"trending-search",children:[e("input",{type:"text",placeholder:"Search trending topics..."}),n("div",{className:"platform-filters",children:[n("label",{children:[e("input",{type:"checkbox"})," Twitter"]}),n("label",{children:[e("input",{type:"checkbox"})," Instagram"]}),n("label",{children:[e("input",{type:"checkbox"})," TikTok"]}),n("label",{children:[e("input",{type:"checkbox"})," YouTube"]})]})]}),c==="ai-continue"&&n("div",{className:"ai-continuation",children:[e("textarea",{placeholder:"Select text to continue or leave empty for auto-continuation..."}),n("div",{className:"ai-options",children:[n("label",{children:[e("input",{type:"radio",name:"tone",value:"creative"}),"Creative"]}),n("label",{children:[e("input",{type:"radio",name:"tone",value:"professional"}),"Professional"]}),n("label",{children:[e("input",{type:"radio",name:"tone",value:"casual"}),"Casual"]})]}),e("button",{className:"generate-btn",children:"✨ Continue Writing"})]}),c==="instructions"&&n("div",{className:"instructions-panel",children:[e("textarea",{placeholder:"Enter specific instructions for AI writing assistance..."}),n("div",{className:"instruction-types",children:[e("button",{children:"📝 Style Guide"}),e("button",{children:"🎯 Target Audience"}),e("button",{children:"📏 Length Control"}),e("button",{children:"🔍 Keywords"})]})]}),c==="generate-versions"&&n("div",{className:"generate-versions-panel",children:[e("h4",{children:"✨ Creative Versions"}),e("p",{children:"Generate multiple versions of your content with different styles and personalities!"}),n("div",{className:"version-controls",children:[n("div",{className:"control-info",children:[e("strong",{children:"Current Mode:"})," ",s.controlSettings.level,e("br",{}),e("strong",{children:"Personality Guide:"})," ",s.controlSettings.yumiPersonality]}),e("button",{className:"generate-btn primary",onClick:ee,disabled:!r.trim(),children:"✨ Generate Versions"}),n("div",{className:"quick-variations",children:[e("h5",{children:"Quick Style Variations:"}),e("button",{onClick:()=>h("formal"),children:"🎩 Formal"}),e("button",{onClick:()=>h("casual"),children:"😊 Casual"}),e("button",{onClick:()=>h("emotional"),children:"💫 Emotional"}),e("button",{onClick:()=>h("humorous"),children:"😄 Humorous"})]})]})]}),c==="anime-collab"&&n("div",{className:"anime-collaboration",children:[n("select",{children:[e("option",{children:"Choose Character..."}),e("option",{children:"Yumi (Cheerful)"}),e("option",{children:"Sakura (Mysterious)"}),e("option",{children:"Hana (Energetic)"})]}),n("div",{className:"collab-options",children:[e("button",{children:"💬 Character Dialogue"}),e("button",{children:"🎭 Role Play"}),e("button",{children:"📖 Story Collaboration"})]})]}),c==="galgame-blog"&&e("div",{className:"galgame-blog",children:n("div",{className:"blog-templates",children:[e("button",{children:"💖 Romance Review"}),e("button",{children:"🎮 Game Analysis"}),e("button",{children:"👥 Character Guide"}),e("button",{children:"📊 Rating System"})]})}),c==="novel-writing"&&e("div",{className:"novel-writing",children:n("div",{className:"novel-tools",children:[e("button",{children:"📚 Chapter Planning"}),e("button",{children:"👥 Character Development"}),e("button",{children:"🗺️ World Building"}),e("button",{children:"📝 Plot Outline"})]})}),c==="test-writing"&&e("div",{className:"test-writing",children:n("div",{className:"test-options",children:[e("button",{children:"📝 Grammar Check"}),e("button",{children:"📊 Readability Score"}),e("button",{children:"🎯 SEO Analysis"}),e("button",{children:"💡 Improvement Suggestions"})]})})]}):null},ae=t=>{switch(t){case"戦おう一緒に":return"アイデアとあらすじを入力…";case"面倒いけどすごい":return"できるだけ詳細に説明してください…";case"任せて":return"アイデアだけを入力してください…"}},oe=async t=>{if(!r.trim())return;const i=t==="戦おう一緒に"?"refine-3":t==="面倒いけどすごい"?"detail-amplify":"outline-5";try{console.log(`Generating with strategy: ${i}`)}catch(a){console.error("Generation failed:",a)}};return n("div",{className:"writing-helper-screen",style:{...te(),opacity:o.opacity},onMouseMove:j,onMouseUp:K,children:[n("div",{className:"screen-header",children:[e("button",{className:"back-btn",onClick:G,children:e(ge,{size:24})}),e("h1",{children:"✍️ Writing Helper"}),e("button",{className:"customize-btn",onClick:()=>H(!I),children:e(he,{size:24})})]}),I&&n("div",{className:"customization-panel",children:[e("h3",{children:"🎨 Customize Writing Helper"}),n("div",{className:"customization-section",children:[e("h4",{children:"Background"}),n("div",{className:"bg-type-selector",children:[n("button",{className:o.type==="solid"?"active":"",onClick:()=>u(t=>({...t,type:"solid"})),children:[e(me,{size:16}),"Solid"]}),e("button",{className:o.type==="gradient"?"active":"",onClick:()=>u(t=>({...t,type:"gradient"})),children:"🌈 Gradient"}),n("button",{className:o.type==="image"?"active":"",onClick:()=>u(t=>({...t,type:"image"})),children:[e(pe,{size:16}),"Image"]})]}),o.type==="solid"&&e("div",{className:"color-picker",children:e("input",{type:"color",value:o.color,onChange:t=>u(i=>({...i,color:t.target.value}))})}),o.type==="gradient"&&n("div",{className:"gradient-presets",children:[e("button",{onClick:()=>u(t=>({...t,gradient:"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)"})),children:"Dark Blue"}),e("button",{onClick:()=>u(t=>({...t,gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"})),children:"Purple"}),e("button",{onClick:()=>u(t=>({...t,gradient:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"})),children:"Pink"})]}),o.type==="image"&&e("div",{className:"image-upload",children:n("button",{onClick:()=>{var t;return(t=f.current)==null?void 0:t.click()},className:"upload-btn",children:[e(M,{size:16}),"Upload Background"]})}),n("div",{className:"opacity-slider",children:[n("label",{children:["Opacity: ",Math.round(o.opacity*100),"%"]}),e("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:o.opacity,onChange:t=>u(i=>({...i,opacity:parseFloat(t.target.value)}))})]})]}),n("div",{className:"customization-section",children:[e("h4",{children:"Sidebar Settings"}),n("div",{className:"sidebar-options",children:[n("button",{onClick:R,children:[e(F,{size:16}),"Switch to ",g==="left"?"Right":"Left"]}),n("button",{onClick:()=>b(!d),children:[d?e(W,{size:16}):e(D,{size:16}),d?"Expand":"Collapse"]})]})]})]}),n("div",{className:`content-area ${d?"sidebar-collapsed":""} sidebar-${g}`,children:[e(be,{mode:C,onChange:q,domain:"writing"}),e("textarea",{className:"main-editor",value:r,onChange:t=>p(t.target.value),placeholder:ae(C),style:{width:"100%",minHeight:"500px",padding:"20px",backgroundColor:"rgba(255, 255, 255, 0.8)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"16px",lineHeight:"1.6",resize:"vertical"}}),e("button",{className:"generate-button",onClick:()=>oe(C),style:{background:"#ff69b4",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",marginTop:"16px",transition:"all 0.2s ease"},children:"生成 ▶︎"})]}),n("div",{ref:m,className:`writing-sidebar ${d?"collapsed":""} ${g}`,style:{cursor:k?"grabbing":"grab"},children:[n("div",{className:"sidebar-header",onMouseDown:Y,children:[n("div",{className:"sidebar-controls",children:[e("button",{className:"collapse-btn",onClick:()=>b(!d),children:d?e(W,{size:20}):e(D,{size:20})}),e("button",{className:"position-btn",onClick:R,children:e(F,{size:20})})]}),!d&&e("h3",{children:"Writing Tools"})]}),!d&&n("div",{className:"sidebar-content",children:[e("div",{className:"tools-grid",children:S.map(t=>n("button",{className:`tool-btn ${c===t.id?"active":""}`,style:{"--category-color":ne(t.category)},onClick:()=>A(t.id),children:[e("span",{className:"tool-icon",children:t.icon}),e("span",{className:"tool-label",children:t.label})]},t.id))}),ie()]}),d&&e("div",{className:"collapsed-icons",children:S.map(t=>e("button",{className:"collapsed-tool-btn",onClick:()=>{b(!1),A(t.id)},title:t.label,children:t.icon},t.id))})]}),e(re,{isOpen:x,onClose:()=>P(!1),mode:"writing-helper",floatingMode:!x}),e(de,{currentSettings:s.controlSettings,onSettingsChange:Q,userHistory:s.userHistory,availablePersonalities:L,mode:"writing"}),_&&w.length>0&&e(ue,{versions:w,onVersionSelect:J,onRequestRefinement:Z,currentPersonality:s.controlSettings.yumiPersonality,refinementSuggestions:["Improve clarity","Add examples","Enhance flow","Adjust tone","Simplify language","Add emotion"]})]})};export{Ce as default};
//# sourceMappingURL=WritingHelperScreen-BqjqOLFN.js.map
